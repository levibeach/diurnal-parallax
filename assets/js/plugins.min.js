!function(e){"use strict";var t=function(e){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than %s.",max:"This value should be lower than %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(e)};t.prototype={constructor:t,validators:{notnull:function(e){return e.length>0},notblank:function(e){return null!==e&&""!==e.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(e){if("object"===typeof e){for(var t in e){if(this.required(e[t])){return true}}return false}return this.notnull(e)&&this.notblank(e)},type:function(e,t){var i;switch(t){case"number":i=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":i=/^\d+$/;break;case"alphanum":i=/^\w+$/;break;case"email":i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":e=new RegExp("(https?|s?ftp|git)","i").test(e)?e:"http://"+e;case"urlstrict":i=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":i=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":i=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return false}return""!==e?i.test(e):false},regexp:function(e,t,i){return new RegExp(t,i.options.regexpFlag||"").test(e)},minlength:function(e,t){return e.length>=t},maxlength:function(e,t){return e.length<=t},rangelength:function(e,t){return this.minlength(e,t[0])&&this.maxlength(e,t[1])},min:function(e,t){return Number(e)>=t},max:function(e,t){return Number(e)<=t},range:function(e,t){return e>=t[0]&&e<=t[1]},equalto:function(t,i,n){n.options.validateIfUnchanged=true;return t===e(i).val()},remote:function(t,i,n){var s=null,r={},a={};r[n.$element.attr("name")]=t;if("undefined"!==typeof n.options.remoteDatatype){a={dataType:n.options.remoteDatatype}}var o=function(t,i){if("undefined"!==typeof i&&"undefined"!==typeof n.Validator.messages.remote&&i!==n.Validator.messages.remote){e(n.ulError+" .remote").remove()}n.updtConstraint({name:"remote",valid:t},i);n.manageValidationResult()};var l=function(t){if("object"===typeof t){return t}try{t=e.parseJSON(t)}catch(i){}return t};var u=function(e){return"object"===typeof e&&null!==e?"undefined"!==typeof e.error?e.error:"undefined"!==typeof e.message?e.message:null:null};e.ajax(e.extend({},{url:i,data:r,type:n.options.remoteMethod||"GET",success:function(e){e=l(e);o(1===e||true===e||"object"===typeof e&&null!==e&&"undefined"!==typeof e.success,u(e))},error:function(e){e=l(e);o(false,u(e))}},a));return s},mincheck:function(e,t){return this.minlength(e,t)},maxcheck:function(e,t){return this.maxlength(e,t)},rangecheck:function(e,t){return this.rangelength(e,t)}},init:function(e){var t=e.validators,i=e.messages;var n;for(n in t){this.addValidator(n,t[n])}for(n in i){this.addMessage(n,i[n])}},formatMesssage:function(e,t){if("object"===typeof t){for(var i in t){e=this.formatMesssage(e,t[i])}return e}return"string"===typeof e?e.replace(new RegExp("%s","i"),t):""},addValidator:function(e,t){this.validators[e]=t},addMessage:function(e,t,i){if("undefined"!==typeof i&&true===i){this.messages.type[e]=t;return}if("type"===e){for(var n in t){this.messages.type[n]=t[n]}return}this.messages[e]=t}};var i=function(e,i,n){this.options=i;this.Validator=new t(i);if(n==="ParsleyFieldMultiple"){return this}this.init(e,n||"ParsleyField")};i.prototype={constructor:i,init:function(t,i){this.type=i;this.valid=true;this.element=t;this.validatedOnce=false;this.$element=e(t);this.val=this.$element.val();this.isRequired=false;this.constraints={};if("undefined"===typeof this.isRadioOrCheckbox){this.isRadioOrCheckbox=false;this.hash=this.generateHash();this.errorClassHandler=this.options.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element}this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();if(this.hasConstraints()){this.bindValidationEvents()}},setParent:function(t){this.$parent=e(t)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required")){this.options.required=true}if("undefined"!==typeof this.$element.attr("type")&&new RegExp(this.$element.attr("type"),"i").test("email url number range")){this.options.type=this.$element.attr("type");if(new RegExp(this.options.type,"i").test("number range")){this.options.type="number";if("undefined"!==typeof this.$element.attr("min")&&this.$element.attr("min").length){this.options.min=this.$element.attr("min")}if("undefined"!==typeof this.$element.attr("max")&&this.$element.attr("max").length){this.options.max=this.$element.attr("max")}}}if("string"===typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length){this.options.regexp=this.$element.attr("pattern")}},addConstraints:function(){for(var e in this.options){var t={};t[e]=this.options[e];this.addConstraint(t,true)}},addConstraint:function(e,t){for(var i in e){i=i.toLowerCase();if("function"===typeof this.Validator.validators[i]){this.constraints[i]={name:i,requirements:e[i],valid:null};if(i==="required"){this.isRequired=true}this.addCustomConstraintMessage(i)}}if("undefined"===typeof t){this.bindValidationEvents()}},updateConstraint:function(e,t){for(var i in e){this.updtConstraint({name:i,requirements:e[i],valid:null},t)}},updtConstraint:function(t,i){this.constraints[t.name]=e.extend(true,this.constraints[t.name],t);if("string"===typeof i){this.Validator.messages[t.name]=i}this.bindValidationEvents()},removeConstraint:function(e){var e=e.toLowerCase();delete this.constraints[e];if(e==="required"){this.isRequired=false}if(!this.hasConstraints()){if("ParsleyForm"===typeof this.getParent()){this.getParent().removeItem(this.$element);return}this.destroy();return}this.bindValidationEvents()},addCustomConstraintMessage:function(e){var t=e+("type"===e&&"undefined"!==typeof this.options[e]?this.options[e].charAt(0).toUpperCase()+this.options[e].substr(1):"")+"Message";if("undefined"!==typeof this.options[t]){this.Validator.addMessage("type"===e?this.options[e]:e,this.options[t],"type"===e)}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);if(this.options.remote&&!new RegExp("change","i").test(this.options.trigger)){this.options.trigger=!this.options.trigger?"change":" change"}var t=(!this.options.trigger?"":this.options.trigger)+(new RegExp("key","i").test(this.options.trigger)?"":" keyup");if(this.$element.is("select")){t+=new RegExp("change","i").test(t)?"":" change"}t=t.replace(/^\s+/g,"").replace(/\s+$/g,"");this.$element.on((t+" ").split(" ").join("."+this.type+" "),false,e.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.val()},eventValidation:function(e){var t=this.getVal();if(e.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(e.type==="change"&&!/change/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(!this.isRadioOrCheckbox&&t.length<this.options.validationMinlength&&!this.validatedOnce){return true}this.validate(true)},isValid:function(){return this.validate(false)},hasConstraints:function(){for(var e in this.constraints){return true}return false},validate:function(e){var t=this.getVal(),i=null;if(!this.hasConstraints()){return null}if(this.options.listeners.onFieldValidate(this.element,this)||""===t&&!this.isRequired){this.reset();return null}if(!this.needsValidation(t)){return this.valid}this.errorBubbling="undefined"!==typeof e?e:true;i=this.applyValidators();if(this.errorBubbling){this.manageValidationResult()}return i},needsValidation:function(e){if(!this.options.validateIfUnchanged&&this.valid!==null&&this.val===e&&this.validatedOnce){return false}this.val=e;return this.validatedOnce=true},applyValidators:function(){var e=null;for(var t in this.constraints){var i=this.Validator.validators[this.constraints[t].name](this.val,this.constraints[t].requirements,this);if(false===i){e=false;this.constraints[t].valid=e}else if(true===i){this.constraints[t].valid=true;e=false!==e}}return e},manageValidationResult:function(){var e=null;for(var t in this.constraints){if(false===this.constraints[t].valid){this.manageError(this.constraints[t]);e=false}else if(true===this.constraints[t].valid){this.removeError(this.constraints[t].name);e=false!==e}}this.valid=e;if(true===this.valid){this.removeErrors();this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);this.options.listeners.onFieldSuccess(this.element,this.constraints,this);return true}else if(false===this.valid){this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);this.options.listeners.onFieldError(this.element,this.constraints,this);return false}return e},ulErrorManagement:function(){this.ulError="#"+this.hash;this.ulTemplate=e(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(t){var i=this.ulError+" ."+t;this.options.animate?e(i).fadeOut(this.options.animateDuration,function(){e(this).remove()}):e(i).remove();if(this.ulError&&e(this.ulError).children().length===0){this.removeErrors()}},addError:function(t){for(var i in t){var n=e(this.options.errors.errorElem).addClass(i);e(this.ulError).append(this.options.animate?e(n).text(t[i]).hide().fadeIn(this.options.animateDuration):e(n).text(t[i]))}},removeErrors:function(){this.options.animate?e(this.ulError).fadeOut(this.options.animateDuration,function(){e(this).remove()}):e(this.ulError).remove()},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=false;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var e in this.constraints){this.constraints[e].valid=null}return this},manageError:function(t){if(!e(this.ulError).length){this.manageErrorContainer()}if("required"===t.name&&null!==this.getVal()&&this.getVal().length>0){return}else if(this.isRequired&&"required"!==t.name&&(null===this.getVal()||0===this.getVal().length)){return}var i=t.name,n=false!==this.options.errorMessage?"custom-error-message":i,s={},r=false!==this.options.errorMessage?this.options.errorMessage:t.name==="type"?this.Validator.messages[i][t.requirements]:"undefined"===typeof this.Validator.messages[i]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[i],t.requirements);if(!e(this.ulError+" ."+n).length){s[n]=r;this.addError(s)}},manageErrorContainer:function(){var t=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),i=this.options.animate?this.ulTemplate.show():this.ulTemplate;if("undefined"!==typeof t){e(t).append(i);return}!this.isRadioOrCheckbox?this.$element.after(i):this.$element.parent().after(i)},addListener:function(e){for(var t in e){this.options.listeners[t]=e[t]}},destroy:function(){this.$element.removeClass("parsley-validated");this.reset().$element.off("."+this.type).removeData(this.type)}};var n=function(e,i,n){this.initMultiple(e,i);this.inherit(e,i);this.Validator=new t(i);this.init(e,n||"ParsleyFieldMultiple")};n.prototype={constructor:n,initMultiple:function(t,i){this.element=t;this.$element=e(t);this.group=i.group||false;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]';this.isRadioOrCheckbox=true;this.isRadio=this.$element.is("input[type=radio]");this.isCheckbox=this.$element.is("input[type=checkbox]");this.errorClassHandler=i.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(e,t){var n=new i(e,t,"ParsleyFieldMultiple");for(var s in n){if("undefined"===typeof this[s]){this[s]=n[s]}}},getName:function(){if(this.group){return"parsley-"+this.group}if("undefined"===typeof this.$element.attr("name")){throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !"}return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio){return e(this.siblings+":checked").val()||""}if(this.isCheckbox){var t=[];e(this.siblings+":checked").each(function(){t.push(e(this).val())});return t}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);var t=this,i=(!this.options.trigger?"":this.options.trigger)+(new RegExp("change","i").test(this.options.trigger)?"":" change");i=i.replace(/^\s+/g,"").replace(/\s+$/g,"");e(this.siblings).each(function(){e(this).on(i.split(" ").join("."+t.type+" "),false,e.proxy(t.eventValidation,t))})}};var s=function(e,t,i){this.init(e,t,i||"parsleyForm")};s.prototype={constructor:s,init:function(t,i,n){this.type=n;this.items=[];this.$element=e(t);this.options=i;var s=this;this.$element.find(i.inputs).each(function(){s.addItem(this)});this.$element.on("submit."+this.type,false,e.proxy(this.validate,this))},addListener:function(e){for(var t in e){if(new RegExp("Field").test(t)){for(var i=0;i<this.items.length;i++){this.items[i].addListener(e)}}else{this.options.listeners[t]=e[t]}}},addItem:function(t){if(e(t).is(this.options.excluded)){return false}var i=e(t).parsley(this.options);i.setParent(this);this.items.push(i)},removeItem:function(t){var i=e(t).parsley();for(var n=0;n<this.items.length;n++){if(this.items[n].hash===i.hash){this.items[n].destroy();this.items.splice(n,1);return true}}return false},validate:function(e){var t=true;this.focusedField=false;for(var i=0;i<this.items.length;i++){if("undefined"!==typeof this.items[i]&&false===this.items[i].validate()){t=false;if(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus){this.focusedField=this.items[i].$element}}}if(this.focusedField&&!t){this.focusedField.focus()}this.options.listeners.onFormSubmit(t,e,this);return t},isValid:function(){for(var e=0;e<this.items.length;e++){if(false===this.items[e].isValid()){return false}}return true},removeErrors:function(){for(var e=0;e<this.items.length;e++){this.items[e].parsley("reset")}},destroy:function(){for(var e=0;e<this.items.length;e++){this.items[e].destroy()}this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var e=0;e<this.items.length;e++){this.items[e].reset()}}};e.fn.parsley=function(t,r){var a=e.extend(true,{},e.fn.parsley.defaults,"undefined"!==typeof window.ParsleyConfig?window.ParsleyConfig:{},t,this.data()),o=null;function l(o,l){var u=e(o).data(l);if(!u){switch(l){case"parsleyForm":u=new s(o,a,"parsleyForm");break;case"parsleyField":u=new i(o,a,"parsleyField");break;case"parsleyFieldMultiple":u=new n(o,a,"parsleyFieldMultiple");break;default:return}e(o).data(l,u)}if("string"===typeof t&&"function"===typeof u[t]){var c=u[t](r);return"undefined"!==typeof c?c:e(o)}return u}if(e(this).is("form")){o=l(e(this),"parsleyForm")}else if(e(this).is(a.inputs)&&!e(this).is(a.excluded)){o=l(e(this),!e(this).is("input[type=radio], input[type=checkbox]")?"parsleyField":"parsleyFieldMultiple")}return"function"===typeof r?r():o};e.fn.parsley.Constructor=s;e.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:false,animate:true,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:false,validators:{},messages:{},validateIfUnchanged:false,errors:{classHandler:function(e,t){},container:function(e,t){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(e,t){return false},onFormSubmit:function(e,t,i){},onFieldError:function(e,t,i){},onFieldSuccess:function(e,t,i){}}};e(window).on("load",function(){e('[data-validate="parsley"]').each(function(){e(this).parsley()})})}(window.jQuery||window.Zepto);window.ParsleyConfig=window.ParsleyConfig||{};(function(e){window.ParsleyConfig=e.extend(true,{},window.ParsleyConfig,{validators:{minwords:function(e,t){e=e.replace(/(^\s*)|(\s*$)/gi,"");e=e.replace(/[ ]{2,}/gi," ");e=e.replace(/\n /,"\n");e=e.split(" ").length;return e>=t},maxwords:function(e,t){e=e.replace(/(^\s*)|(\s*$)/gi,"");e=e.replace(/[ ]{2,}/gi," ");e=e.replace(/\n /,"\n");e=e.split(" ").length;return e<=t},rangewords:function(e,t){e=e.replace(/(^\s*)|(\s*$)/gi,"");e=e.replace(/[ ]{2,}/gi," ");e=e.replace(/\n /,"\n");e=e.split(" ").length;return e>=t[0]&&e<=t[1]},greaterthan:function(t,i,n){n.options.validateIfUnchanged=true;return new Number(t)>new Number(e(i).val())},lessthan:function(t,i,n){n.options.validateIfUnchanged=true;return new Number(t)<new Number(e(i).val())},beforedate:function(t,i,n){return Date.parse(t)<Date.parse(e(i).val())},afterdate:function(t,i,n){return Date.parse(e(i).val())<Date.parse(t)},inlist:function(e,t,i){var n=i.options.inlistDelimiter||",";var s=(t+"").split(new RegExp("\\s*\\"+n+"\\s*"));return s.indexOf(e.trim())!==-1},luhn:function(e,t,i){e=e.replace(/[ -]/g,"");var n,s,r,a,o,l;r=0;l=e.split("").reverse();for(s=a=0,o=l.length;a<o;s=++a){n=l[s];n=+n;if(s%2){n*=2;if(n<10){r+=n}else{r+=n-9}}else{r+=n}}return r%10===0}},messages:{minwords:"This value should have %s words at least.",maxwords:"This value should have %s words maximum.",rangewords:"This value should have between %s and %s words.",greaterthan:"This value should be greater than %s.",lessthan:"This value should be less than %s.",beforedate:"This date should be before %s.",afterdate:"This date should be after %s.",luhn:"This value should pass the luhn test."}})})(window.jQuery||window.Zepto);var Placeholders=function(){"use strict";var e=["text","search","url","tel","email","password","number","textarea"],t={live:false,hideOnFocus:false,className:"placeholderspolyfill",textColor:"#999",styleImportant:true},i=[37,38,39,40],n,s,r=new RegExp("\\b"+t.className+"\\b");function a(e){var t;if(e.createTextRange){t=e.createTextRange();t.move("character",0);t.select()}else if(e.selectionStart){e.focus();e.setSelectionRange(0,0)}}function o(){var e;if(this.value===this.getAttribute("placeholder")){if(!t.hideOnFocus){a(this)}else{this.className=this.className.replace(r,"");this.value="";e=this.getAttribute("data-placeholdertype");if(e){this.type=e}}}}function l(){var e;if(this.value===""){this.className=this.className+" "+t.className;this.value=this.getAttribute("placeholder");e=this.getAttribute("data-placeholdertype");if(e){this.type="text"}}}function u(){var e=this.getElementsByTagName("input"),t=this.getElementsByTagName("textarea"),i=e.length,n=i+t.length,s,r,a;for(a=0;a<n;a+=1){s=a<i?e[a]:t[a-i];r=s.getAttribute("placeholder");if(s.value===r){s.value=""}}}function c(e){s=this.value;return!(s===this.getAttribute("placeholder")&&i.indexOf(e.keyCode)>-1)}function d(){var e;if(this.value!==s){this.className=this.className.replace(r,"");this.value=this.value.replace(this.getAttribute("placeholder"),"");e=this.getAttribute("data-placeholdertype");if(e){this.type=e}}if(this.value===""){l.call(this);a(this)}}function h(e,t,i){if(e.addEventListener){return e.addEventListener(t,i.bind(e),false)}if(e.attachEvent){return e.attachEvent("on"+t,i.bind(e))}}function f(e){if(!t.hideOnFocus){h(e,"keydown",c);h(e,"keyup",d)}h(e,"focus",o);h(e,"blur",l)}function p(){var i=document.getElementsByTagName("input"),n=document.getElementsByTagName("textarea"),s=i.length,r=s+n.length,a,o,l,c,d;for(a=0;a<r;a+=1){l=a<s?i[a]:n[a-s];d=l.getAttribute("placeholder");if(e.indexOf(l.type)>-1){if(d){c=l.getAttribute("data-currentplaceholder");if(d!==c){if(l.value===c||l.value===d||!l.value){l.value=d;l.className=l.className+" "+t.className}if(!c){if(l.form){o=l.form;if(!o.getAttribute("data-placeholdersubmit")){h(o,"submit",u);o.setAttribute("data-placeholdersubmit","true")}}f(l)}l.setAttribute("data-currentplaceholder",d)}}}}}function g(){var i=document.getElementsByTagName("input"),n=document.getElementsByTagName("textarea"),s=i.length,r=s+n.length,a,o,l,c;for(a=0;a<r;a+=1){o=a<s?i[a]:n[a-s];c=o.getAttribute("placeholder");if(e.indexOf(o.type)>-1){if(c){if(o.type==="password"){try{o.type="text";o.setAttribute("data-placeholdertype","password")}catch(d){}}o.setAttribute("data-currentplaceholder",c);if(o.value===""||o.value===c){o.className=o.className+" "+t.className;o.value=c}if(o.form){l=o.form;if(!l.getAttribute("data-placeholdersubmit")){h(l,"submit",u);l.setAttribute("data-placeholdersubmit","true")}}f(o)}}}}function m(e){var i=document.createElement("input"),s,r,a,o,l;if(typeof i.placeholder==="undefined"){for(s in e){if(e.hasOwnProperty(s)){t[s]=e[s]}}r=document.createElement("style");r.type="text/css";var u=t.styleImportant?"!important":"";a=document.createTextNode("."+t.className+" { color:"+t.textColor+u+"; }");if(r.styleSheet){r.styleSheet.cssText=a.nodeValue}else{r.appendChild(a)}document.getElementsByTagName("head")[0].appendChild(r);if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){for(o=t||0,l=this.length;o<l;o+=1){if(this[o]===e){return o}}return-1}}if(!Function.prototype.bind){Function.prototype.bind=function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;s.prototype=new n;return s}}g();if(t.live){n=setInterval(p,100)}return true}return false}return{init:m,refresh:p}}();(function(e){"use strict";var t="20130323";e.fn.cycle=function(t){var i;if(this.length===0&&!e.isReady){i={s:this.selector,c:this.context};e.fn.cycle.log("requeuing slideshow (dom not ready)");e(function(){e(i.s,i.c).cycle(t)});return this}return this.each(function(){var i,s,r,a;var o=e(this);var l=e.fn.cycle.log;if(o.data("cycle.opts"))return;if(o.data("cycle-log")===false||t&&t.log===false||s&&s.log===false){l=e.noop}l("--c2 init--");i=o.data();for(var u in i){if(i.hasOwnProperty(u)&&/^cycle[A-Z]+/.test(u)){a=i[u];r=u.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,n);l(r+":",a,"("+typeof a+")");i[r]=a}}s=e.extend({},e.fn.cycle.defaults,i,t||{});s.timeoutId=0;s.paused=s.paused||false;s.container=o;s._maxZ=s.maxZ;s.API=e.extend({_container:o},e.fn.cycle.API);s.API.log=l;s.API.trigger=function(e,t){s.container.trigger(e,t);return s.API};o.data("cycle.opts",s);o.data("cycle.API",s.API);s.API.trigger("cycle-bootstrap",[s,s.API]);s.API.addInitialSlides();s.API.preInitSlideshow();if(s.slides.length)s.API.initSlideshow()})};e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts();var i=t.slides;t.slideCount=0;t.slides=e();i=i.jquery?i:t.container.find(i);if(t.random){i.sort(function(){return Math.random()-.5})}t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];if(i&&e.isFunction(i.preInit))i.preInit(t);t._preInitialized=true},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];if(i&&e.isFunction(i.postInit))i.postInit(t)},initSlideshow:function(){var t=this.opts();var i=t.container;var n;t.API.calcFirstSlide();if(t.container.css("position")=="static")t.container.css("position","relative");e(t.slides[t.currSlide]).css("opacity",1).show();t.API.stackSlides(t.slides[t.currSlide],t.slides[t.nextSlide],!t.reverse);if(t.pauseOnHover){if(t.pauseOnHover!==true)i=e(t.pauseOnHover);i.hover(function(){t.API.pause(true)},function(){t.API.resume(true)})}if(t.timeout){n=t.API.getSlideOpts(t.nextSlide);t.API.queueTransition(n,t.timeout+t.delay)}t._initialized=true;t.API.updateView(true);t.API.trigger("cycle-initialized",[t]);t.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),s=i.hoverPaused||i.paused;if(t)i.hoverPaused=true;else i.paused=true;if(!s){i.container.addClass("cycle-paused");i.API.trigger("cycle-paused",[i]).log("cycle-paused");if(n.timeout){clearTimeout(i.timeoutId);i.timeoutId=0;i._remainingTimeout-=e.now()-i._lastQueue;if(i._remainingTimeout<0)i._remainingTimeout=undefined}}},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused,n;if(e)t.hoverPaused=false;else t.paused=false;if(!i){t.container.removeClass("cycle-paused");t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout);t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed")}},add:function(t,i){var n=this.opts();var s=n.slideCount;var r=false;var a;if(e.type(t)=="string")t=e.trim(t);e(t).each(function(t){var s;var r=e(this);if(i)n.container.prepend(r);else n.container.append(r);n.slideCount++;s=n.API.buildSlideOpts(r);if(i)n.slides=e(r).add(n.slides);else n.slides=n.slides.add(r);n.API.initSlide(s,r,--n._maxZ);r.data("cycle.opts",s);n.API.trigger("cycle-slide-added",[n,s,r])});n.API.updateView(true);r=n._preInitialized&&s<2&&n.slideCount>=1;if(r){if(!n._initialized)n.API.initSlideshow();else if(n.timeout){a=n.slides.length;n.nextSlide=n.reverse?a-1:1;if(!n.timeoutId){n.API.queueTransition(n)}}}},calcFirstSlide:function(){var e=this.opts();var t;t=parseInt(e.startingSlide||0,10);if(t>=e.slides.length||t<0)t=0;e.currSlide=t;if(e.reverse){e.nextSlide=t-1;if(e.nextSlide<0)e.nextSlide=e.slides.length-1}else{e.nextSlide=t+1;if(e.nextSlide==e.slides.length)e.nextSlide=0}},calcNextSlide:function(){var e=this.opts();var t;if(e.reverse){t=e.nextSlide-1<0;e.nextSlide=t?e.slideCount-1:e.nextSlide-1;e.currSlide=t?0:e.nextSlide+1}else{t=e.nextSlide+1==e.slides.length;e.nextSlide=t?0:e.nextSlide+1;e.currSlide=t?e.slides.length-1:e.nextSlide-1}},calcTx:function(t,i){var n=t;var s;if(i&&n.manualFx)s=e.fn.cycle.transitions[n.manualFx];if(!s)s=e.fn.cycle.transitions[n.fx];if(!s){s=e.fn.cycle.transitions.fade;n.API.log('Transition "'+n.fx+'" not found.  Using fade.')}return s},prepareTx:function(e,t){var i=this.opts();var n,s,r,a,o;if(i.slideCount<2){i.timeoutId=0;return}if(e&&(!i.busy||i.manualTrump)){i.API.stopTransition();i.busy=false;clearTimeout(i.timeoutId);i.timeoutId=0}if(i.busy)return;if(i.timeoutId===0&&!e)return;s=i.slides[i.currSlide];r=i.slides[i.nextSlide];a=i.API.getSlideOpts(i.nextSlide);o=i.API.calcTx(a,e);i._tx=o;if(e&&a.manualSpeed!==undefined)a.speed=a.manualSpeed;if(i.nextSlide!=i.currSlide&&(e||!i.paused&&!i.hoverPaused&&i.timeout)){i.API.trigger("cycle-before",[a,s,r,t]);if(o.before)o.before(a,s,r,t);n=function(){i.busy=false;if(!i.container.data("cycle.opts"))return;if(o.after)o.after(a,s,r,t);i.API.trigger("cycle-after",[a,s,r,t]);i.API.queueTransition(a);i.API.updateView(true)};i.busy=true;if(o.transition)o.transition(a,s,r,t,n);else i.API.doTransition(a,s,r,t,n);i.API.calcNextSlide();i.API.updateView()}else{i.API.queueTransition(a)}},doTransition:function(t,i,n,s,r){var a=t;var o=e(i),l=e(n);var u=function(){l.animate(a.animIn||{opacity:1},a.speed,a.easeIn||a.easing,r)};l.css(a.cssBefore||{});o.animate(a.animOut||{},a.speed,a.easeOut||a.easing,function(){o.css(a.cssAfter||{});if(!a.sync){u()}});if(a.sync){u()}},queueTransition:function(t,i){var n=this.opts();var s=i!==undefined?i:t.timeout;if(n.nextSlide===0&&--n.loop===0){n.API.log("terminating; loop=0");n.timeout=0;if(s){setTimeout(function(){n.API.trigger("cycle-finished",[n])},s)}else{n.API.trigger("cycle-finished",[n])}n.nextSlide=n.currSlide;return}if(s){n._lastQueue=e.now();if(i===undefined)n._remainingTimeout=t.timeout;if(!n.paused&&!n.hoverPaused){n.timeoutId=setTimeout(function(){n.API.prepareTx(false,!n.reverse)},s)}}},stopTransition:function(){var e=this.opts();if(e.slides.filter(":animated").length){e.slides.stop(false,true);e.API.trigger("cycle-transition-stopped",[e])}if(e._tx&&e._tx.stopTransition)e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();clearTimeout(t.timeoutId);t.timeoutId=0;t.nextSlide=t.currSlide+e;if(t.nextSlide<0)t.nextSlide=t.slides.length-1;else if(t.nextSlide>=t.slides.length)t.nextSlide=0;t.API.prepareTx(true,e>=0);return false},buildSlideOpts:function(t){var i=this.opts();var s,r;var a=t.data()||{};for(var o in a){if(a.hasOwnProperty(o)&&/^cycle[A-Z]+/.test(o)){s=a[o];r=o.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,n);i.API.log("["+(i.slideCount-1)+"]",r+":",s,"("+typeof s+")");a[r]=s}}a=e.extend({},e.fn.cycle.defaults,i,a);a.slideNum=i.slideCount;try{delete a.API;delete a.slideCount;delete a.currSlide;delete a.nextSlide;delete a.slides}catch(l){}return a},getSlideOpts:function(t){var i=this.opts();if(t===undefined)t=i.currSlide;var n=i.slides[t];var s=e(n).data("cycle.opts");return e.extend({},i,s)},initSlide:function(t,i,n){var s=this.opts();i.css(t.slideCss||{});if(n>0)i.css("zIndex",n);if(isNaN(t.speed))t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default;if(!t.sync)t.speed=t.speed/2;i.addClass(s.slideClass)},updateView:function(e){var t=this.opts();if(!t._initialized)return;var i=t.API.getSlideOpts();var n=t.slides[t.currSlide];if(!e){t.API.trigger("cycle-update-view-before",[t,i,n]);if(t.updateView<0)return}if(t.slideActiveClass){t.slides.removeClass(t.slideActiveClass).eq(t.currSlide).addClass(t.slideActiveClass)
}if(e&&t.hideNonActive)t.slides.filter(":not(."+t.slideActiveClass+")").hide();t.API.trigger("cycle-update-view",[t,i,n,e]);t.API.trigger("cycle-update-view-after",[t,i,n])},getComponent:function(t){var i=this.opts();var n=i[t];if(typeof n==="string"){return/^\s*\>/.test(n)?i.container.find(n):e(n)}if(n.jquery)return n;return e(n)},stackSlides:function(t,i,n){var s=this.opts();if(!t){t=s.slides[s.currSlide];i=s.slides[s.nextSlide];n=!s.reverse}e(t).css("zIndex",s.maxZ);var r;var a=s.maxZ-2;var o=s.slideCount;if(n){for(r=s.currSlide+1;r<o;r++)e(s.slides[r]).css("zIndex",a--);for(r=0;r<s.currSlide;r++)e(s.slides[r]).css("zIndex",a--)}else{for(r=s.currSlide-1;r>=0;r--)e(s.slides[r]).css("zIndex",a--);for(r=o-1;r>s.currSlide;r--)e(s.slides[r]).css("zIndex",a--)}e(i).css("zIndex",s.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}};e.fn.cycle.log=function i(){if(window.console&&console.log)console.log("[cycle2] "+Array.prototype.join.call(arguments," "))};e.fn.cycle.version=function(){return"Cycle2: "+t};function n(e){return(e||"").toLowerCase()}e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n);e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,i,n,s){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,s);t.cssBefore=e.extend(r,{opacity:0,display:"block"});t.animIn={opacity:1};t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,s){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,s);t.cssBefore=e.extend(r,{opacity:1,display:"block"});t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var s=e.container.css("overflow","hidden").width();e.cssBefore={left:n?s:-s,top:0,opacity:1,display:"block"};e.cssAfter={zIndex:e._maxZ-2,left:0};e.animIn={left:0};e.animOut={left:n?-s:s}}}};e.fn.cycle.defaults={allowWrap:true,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:true,loop:0,manualFx:undefined,manualSpeed:undefined,manualTrump:true,maxZ:100,pauseOnHover:false,reverse:false,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:true,timeout:4e3,updateView:-1};e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{autoHeight:0});e(document).on("cycle-initialized",function(i,r){var a=r.autoHeight;var o=e.type(a);var l=null;var u;if(o!=="string"&&o!=="number")return;r.container.on("cycle-slide-added cycle-slide-removed",t);r.container.on("cycle-destroyed",s);if(a=="container"){r.container.on("cycle-before",n)}else if(o==="string"&&/\d+\:\d+/.test(a)){u=a.match(/(\d+)\:(\d+)/);u=u[1]/u[2];r._autoHeightRatio=u}if(o!=="number"){r._autoHeightOnResize=function(){clearTimeout(l);l=setTimeout(c,50)};e(window).on("resize orientationchange",r._autoHeightOnResize)}setTimeout(c,30);function c(){t(i,r)}});function t(t,n){var s,r,a;var o=n.autoHeight;if(o=="container"){r=e(n.slides[n.currSlide]).outerHeight();n.container.height(r)}else if(n._autoHeightRatio){n.container.height(n.container.width()/n._autoHeightRatio)}else if(o==="calc"||e.type(o)=="number"&&o>=0){if(o==="calc")a=i(t,n);else if(o>=n.slides.length)a=0;else a=o;if(a==n._sentinelIndex)return;n._sentinelIndex=a;if(n._sentinel)n._sentinel.remove();s=e(n.slides[a].cloneNode(true));s.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel");s.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide");s.find("*").css("visibility","hidden");n._sentinel=s}}function i(t,i){var n=0,s=-1;i.slides.each(function(t){var i=e(this).height();if(i>s){s=i;n=t}});return n}function n(t,i,n,s,r){var a=e(s).outerHeight();var o=i.sync?i.speed/2:i.speed;i.container.animate({height:a},o)}function s(i,r){if(r._autoHeightOnResize){e(window).off("resize orientationchange",r._autoHeightOnResize);r._autoHeightOnResize=null}r.container.off("cycle-slide-added cycle-slide-removed",t);r.container.off("cycle-destroyed",s);r.container.off("cycle-before",n);if(r._sentinel){r._sentinel.remove();r._sentinel=null}}})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"});e(document).on("cycle-update-view",function(t,i,n,s){if(i.captionModule!=="caption")return;var r;e.each(["caption","overlay"],function(){var e=this;var t=n[e+"Template"];var r=i.API.getComponent(e);if(r.length&&t){r.html(i.API.tmpl(t,n,i,s));r.show()}else{r.hide()}})});e(document).on("cycle-destroyed",function(t,i){var n;e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"];if(i[e]&&t){n=i.API.getComponent("caption");n.empty()}})})})(jQuery);(function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,s,r;var a=e.makeArray(arguments);if(e.type(i)=="number"){return this.cycle("goto",i)}if(e.type(i)=="string"){return this.each(function(){var o;n=i;r=e(this).data("cycle.opts");if(r===undefined){t.log('slideshow must be initialized before sending commands; "'+n+'" ignored');return}else{n=n=="goto"?"jump":n;s=r.API[n];if(e.isFunction(s)){o=e.makeArray(a);o.shift();return s.apply(r.API,o)}else{t.log("unknown command: ",n)}}})}else{return t.apply(this,arguments)}};e.extend(e.fn.cycle,t);e.extend(t.API,{next:function(){var e=this.opts();if(e.busy&&!e.manualTrump)return;var t=e.reverse?-1:1;if(e.allowWrap===false&&e.currSlide+t>=e.slideCount)return;e.API.advanceSlide(t);e.API.trigger("cycle-next",[e]).log("cycle-next")},prev:function(){var e=this.opts();if(e.busy&&!e.manualTrump)return;var t=e.reverse?1:-1;if(e.allowWrap===false&&e.currSlide+t<0)return;e.API.advanceSlide(t);e.API.trigger("cycle-prev",[e]).log("cycle-prev")},destroy:function(){var e=this.opts();clearTimeout(e.timeoutId);e.timeoutId=0;e.API.stop();e.API.trigger("cycle-destroyed",[e]).log("cycle-destroyed");e.container.removeData("cycle.opts");if(!e.retainStylesOnDestroy){e.container.removeAttr("style");e.slides.removeAttr("style");e.slides.removeClass("cycle-slide-active")}},jump:function(e){var t;var i=this.opts();if(i.busy&&!i.manualTrump)return;var n=parseInt(e,10);if(isNaN(n)||n<0||n>=i.slides.length){i.API.log("goto: invalid slide index: "+n);return}if(n==i.currSlide){i.API.log("goto: skipping, already on slide",n);return}i.nextSlide=n;clearTimeout(i.timeoutId);i.timeoutId=0;i.API.log("goto: ",n," (zero-index)");t=i.currSlide<i.nextSlide;i.API.prepareTx(true,t)},stop:function(){var t=this.opts();var i=t.container;clearTimeout(t.timeoutId);t.timeoutId=0;t.API.stopTransition();if(t.pauseOnHover){if(t.pauseOnHover!==true)i=e(t.pauseOnHover);i.off("mouseenter mouseleave")}t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy();e.container.cycle()},remove:function(t){var i=this.opts();var n,s,r=[],a=1;for(var o=0;o<i.slides.length;o++){n=i.slides[o];if(o==t){s=n}else{r.push(n);e(n).data("cycle.opts").slideNum=a;a++}}if(s){i.slides=e(r);i.slideCount--;e(s).remove();if(t==i.currSlide){i.API.advanceSlide(1)}i.API.trigger("cycle-slide-removed",[i,t,s]).log("cycle-slide-removed");i.API.updateView()}}});e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var i=e(this);var n=i.data("cycle-cmd");var s=i.data("cycle-context")||".cycle-slideshow";e(s).cycle(n,i.data("cycle-arg"))})})(jQuery);(function(e){"use strict";e(document).on("cycle-pre-initialize",function(i,n){t(n,true);n._onHashChange=function(){t(n,false)};e(window).on("hashchange",n._onHashChange)});e(document).on("cycle-update-view",function(e,t,i){if(i.hash){t._hashFence=true;window.location.hash=i.hash}});e(document).on("cycle-destroyed",function(t,i){if(i._onHashChange){e(window).off("hashchange",i._onHashChange)}});function t(t,i){var n;if(t._hashFence){t._hashFence=false;return}n=window.location.hash.substring(1);t.slides.each(function(s){if(e(this).data("cycle-hash")==n){if(i===true){t.startingSlide=s}else{t.nextSlide=s;t.API.prepareTx(true,false)}return false}})}})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{loader:false});e(document).on("cycle-bootstrap",function(t,i){var n;if(!i.loader)return;n=i.API.add;i.API.add=s;function s(t,s){var r=[];if(e.type(t)=="string")t=e.trim(t);else if(e.type(t)==="array"){for(var a=0;a<t.length;a++)t[a]=e(t[a])[0]}t=e(t);var o=t.length;if(!o)return;t.hide().appendTo("body").each(function(t){var a=0;var u=e(this);var c=u.is("img")?u:u.find("img");u.data("index",t);c=c.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])');if(!c.length){--o;r.push(u);return}a=c.length;c.each(function(){if(this.complete){d()}else{e(this).load(function(){d()}).error(function(){if(--a===0){i.API.log("slide skipped; img not loaded:",this.src);if(--o===0&&i.loader=="wait"){n.apply(i.API,[r,s])}}})}});function d(){if(--a===0){--o;l(u)}}});if(o)i.container.addClass("cycle-loading");function l(t){var a;if(i.loader=="wait"){r.push(t);if(o===0){r.sort(u);n.apply(i.API,[r,s]);i.container.removeClass("cycle-loading")}}else{a=e(i.slides[i.currSlide]);n.apply(i.API,[t,s]);a.show();i.container.removeClass("cycle-loading")}}function u(e,t){return e.data("index")-t.data("index")}}})})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"});e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t});e(document).on("cycle-slide-added",function(e,t,n,s){if(t.pager){t.API.buildPagerLink(t,n,s);t.API.page=i}});e(document).on("cycle-slide-removed",function(t,i,n,s){if(i.pager){var r=i.API.getComponent("pager");r.each(function(){var t=e(this);e(t.children()[n]).remove()})}});e(document).on("cycle-update-view",function(t,i,n){var s;if(i.pager){s=i.API.getComponent("pager");s.each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)})}});e(document).on("cycle-destroyed",function(e,t){var i;if(t.pager&&t.pagerTemplate){i=t.API.getComponent("pager");i.empty()}});function t(t,i,n){var s;var r=t.API.getComponent("pager");r.each(function(){var r=e(this);if(i.pagerTemplate){var a=t.API.tmpl(i.pagerTemplate,i,t,n[0]);s=e(a).appendTo(r)}else{s=r.children().eq(t.slideCount-1)}s.on(t.pagerEvent,function(e){e.preventDefault();t.API.page(r,e.currentTarget)})})}function i(e,t){var i=this.opts();if(i.busy&&!i.manualTrump)return;var n=e.children().index(t);var s=n;var r=i.currSlide<s;if(i.currSlide==s){return}i.nextSlide=s;i.API.prepareTx(true,r);i.API.trigger("cycle-pager-activated",[i,e,t])}})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:false});e(document).on("cycle-initialized",function(e,t){t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault();t.API.next()});t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault();t.API.prev()});if(t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle";var n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,function(e){t.API.next()});t.container.on(n,function(){t.API.prev()})}});e(document).on("cycle-update-view",function(e,t,i,n){if(t.allowWrap)return;var s=t.disabledClass;var r=t.API.getComponent("next");var a=t.API.getComponent("prev");var o=t._prevBoundry||0;var l=t._nextBoundry||t.slideCount-1;if(t.currSlide==l)r.addClass(s).prop("disabled",true);else r.removeClass(s).prop("disabled",false);if(t.currSlide===o)a.addClass(s).prop("disabled",true);else a.removeClass(s).prop("disabled",false)});e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent);t.API.getComponent("next").off(t.prevEvent);t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:false});e(document).on("cycle-pre-initialize",function(t,i){if(!i.progressive)return;var n=i.API;var s=n.next;var r=n.prev;var a=n.prepareTx;var o=e.type(i.progressive);var l,u;if(o=="array"){l=i.progressive}else if(e.isFunction(i.progressive)){l=i.progressive(i)}else if(o=="string"){u=e(i.progressive);l=e.trim(u.html());if(!l)return;if(/^(\[)/.test(l)){try{l=e.parseJSON(l)}catch(c){n.log("error parsing progressive slides",c);return}}else{l=l.split(new RegExp(u.data("cycle-split")||"\n"));if(!l[l.length-1])l.pop()}}if(a){n.prepareTx=function(e,t){var n,s;if(e||l.length===0){a.apply(i.API,[e,t]);return}if(t&&i.currSlide==i.slideCount-1){s=l[0];l=l.slice(1);i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.API.advanceSlide(1)},50)});i.API.add(s)}else if(!t&&i.currSlide===0){n=l.length-1;s=l[n];l=l.slice(0,n);i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.currSlide=1;t.API.advanceSlide(-1)},50)});i.API.add(s,true)}else{a.apply(i.API,[e,t])}}}if(s){n.next=function(){var e=this.opts();if(l.length&&e.currSlide==e.slideCount-1){var t=l[0];l=l.slice(1);e.container.one("cycle-slide-added",function(e,t){s.apply(t.API);t.container.removeClass("cycle-loading")});e.container.addClass("cycle-loading");e.API.add(t)}else{s.apply(e.API)}}}if(r){n.prev=function(){var e=this.opts();if(l.length&&e.currSlide===0){var t=l.length-1;var i=l[t];l=l.slice(0,t);e.container.one("cycle-slide-added",function(e,t){t.currSlide=1;t.API.advanceSlide(-1);t.container.removeClass("cycle-loading")});e.container.addClass("cycle-loading");e.API.add(i,true)}else{r.apply(e.API)}}}})})(jQuery);(function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"});e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g");var s=e.makeArray(arguments);s.shift();return t.replace(n,function(t,i){var n,r,a,o,l=i.split(".");for(n=0;n<s.length;n++){a=s[n];if(!a)continue;if(l.length>1){o=a;for(r=0;r<l.length;r++){a=o;o=o[l[r]]||i}}else{o=a[i]}if(e.isFunction(o))return o.apply(a,s);if(o!==undefined&&o!==null&&o!=i)return o}return i})}})})(jQuery);if(window.google&&window.google.maps){var GMaps=function(e){"use strict";var t=document;var i=function(i,n){var s;if("jQuery"in e&&n){s=$("#"+i.replace("#",""),n)[0]}else{s=t.getElementById(i.replace("#",""))}return s};var n=function(e){var s=this;var r=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"];var a=["mousemove","mouseout","mouseover"];window.context_menu={};if(typeof e.el==="string"||typeof e.div==="string"){this.el=i(e.el||e.div,e.context)}else{this.el=e.el||e.div}if(typeof this.el==="undefined"||this.el===null){throw"No element defined."}this.el.style.width=e.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=e.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=e.zoom||15;this.registered_events={};var o=e.markerClusterer;var l;if(e.mapType){l=google.maps.MapTypeId[e.mapType.toUpperCase()]}else{l=google.maps.MapTypeId.ROADMAP}var u=new google.maps.LatLng(e.lat,e.lng);delete e.el;delete e.lat;delete e.lng;delete e.mapType;delete e.width;delete e.height;delete e.markerClusterer;var c=e.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"};var d=e.zoomControl||true,h=c.style||"DEFAULT",f=c.position||"TOP_LEFT",p=e.panControl||true,g=e.mapTypeControl||true,m=e.scaleControl||true,v=e.streetViewControl||true,y=y||true;var x={};var w={zoom:this.zoom,center:u,mapTypeId:l};var F={panControl:p,zoomControl:d,zoomControlOptions:{style:google.maps.ZoomControlStyle[h],position:google.maps.ControlPosition[f]},mapTypeControl:g,scaleControl:m,streetViewControl:v,overviewMapControl:y};if(e.disableDefaultUI!=true)w=extend_object(w,F);x=extend_object(w,e);for(var b=0;b<r.length;b++){delete x[r[b]]}for(var b=0;b<a.length;b++){delete x[a[b]]}this.map=new google.maps.Map(this.el,x);if(o){this.markerClusterer=o.apply(this,[this.map])}var k=function(e){var t=0;var i=0;if(e.offsetParent){do{t+=e.offsetLeft;i+=e.offsetTop}while(e=e.offsetParent)}return[t,i]};var P=function(e,t){var n="";var r=window.context_menu[e];for(var a in r){if(r.hasOwnProperty(a)){var o=r[a];n+='<li><a id="'+e+"_"+a+'" href="#">'+o.title+"</a></li>"}}if(!i("gmaps_context_menu"))return;var l=i("gmaps_context_menu");l.innerHTML=n;var u=l.getElementsByTagName("a");var c=u.length;for(var a=0;a<c;a++){var d=u[a];var h=function(i){i.preventDefault();r[this.id.replace(e+"_","")].action.apply(s,[t]);s.hideContextMenu()};google.maps.event.clearListeners(d,"click");google.maps.event.addDomListenerOnce(d,"click",h,false)}var f=k.apply(this,[s.el]);var p=f[0]+t.pixel.x-15;var g=f[1]+t.pixel.y-15;l.style.left=p+"px";l.style.top=g+"px";l.style.display="block"};var C=function(e,t){if(e==="marker"){t.pixel={};var i=new google.maps.OverlayView;i.setMap(s.map);i.draw=function(){var n=i.getProjection();var s=t.marker.getPosition();t.pixel=n.fromLatLngToContainerPixel(s);P(e,t)}}else{P(e,t)}};this.setContextMenu=function(e){window.context_menu[e.control]={};for(var n in e.options){if(e.options.hasOwnProperty(n)){var s=e.options[n];window.context_menu[e.control][s.name]={title:s.title,action:s.action}}}var r=t.createElement("ul");r.id="gmaps_context_menu";r.style.display="none";r.style.position="absolute";r.style.minWidth="100px";r.style.background="white";r.style.listStyle="none";r.style.padding="8px";r.style.boxShadow="2px 2px 6px #ccc";t.body.appendChild(r);var a=i("gmaps_context_menu");google.maps.event.addDomListener(a,"mouseout",function(e){if(!e.relatedTarget||!this.contains(e.relatedTarget)){window.setTimeout(function(){a.style.display="none"},400)}},false)};this.hideContextMenu=function(){var e=i("gmaps_context_menu");if(e)e.style.display="none"};var A=function(t,i){google.maps.event.addListener(t,i,function(t){if(t==undefined){t=this}e[i].apply(this,[t]);s.hideContextMenu()})};for(var I=0;I<r.length;I++){var _=r[I];if(_ in e){A(this.map,_)}}for(var I=0;I<a.length;I++){var _=a[I];if(_ in e){A(this.map,_)}}google.maps.event.addListener(this.map,"rightclick",function(t){if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu["map"]!=undefined){C("map",t)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var e=[];var t=this.markers.length;for(var i=0;i<t;i++){e.push(this.markers[i].getPosition())}this.fitLatLngBounds(e)};this.fitLatLngBounds=function(e){var t=e.length;var i=new google.maps.LatLngBounds;for(var n=0;n<t;n++){i.extend(e[n])}this.map.fitBounds(i)};this.setCenter=function(e,t,i){this.map.panTo(new google.maps.LatLng(e,t));if(i){i()}};this.getElement=function(){return this.el};this.zoomIn=function(e){e=e||1;this.zoom=this.map.getZoom()+e;this.map.setZoom(this.zoom)};this.zoomOut=function(e){e=e||1;this.zoom=this.map.getZoom()-e;this.map.setZoom(this.zoom)};var T=[];for(var S in this.map){if(typeof this.map[S]=="function"&&!this[S]){T.push(S)}}for(var b=0;b<T.length;b++){(function(e,t,i){e[i]=function(){return t[i].apply(t,arguments)}})(this,this.map,T[b])}this.createControl=function(e){var i=t.createElement("div");i.style.cursor="pointer";i.style.fontFamily="Arial, sans-serif";i.style.fontSize="13px";i.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var n in e.style)i.style[n]=e.style[n];if(e.id){i.id=e.id}if(e.classes){i.className=e.classes}if(e.content){i.innerHTML=e.content}for(var s in e.events){(function(t,i){google.maps.event.addDomListener(t,i,function(){e.events[i].apply(this,[this])})})(i,s)}i.index=1;return i};this.addControl=function(e){var t=google.maps.ControlPosition[e.position.toUpperCase()];delete e.position;var i=this.createControl(e);this.controls.push(i);this.map.controls[t].push(i);return i};this.createMarker=function(e){if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position){var t=this;var i=e.details;var n=e.fences;var s=e.outside;var r={position:new google.maps.LatLng(e.lat,e.lng),map:null};delete e.lat;delete e.lng;delete e.fences;delete e.outside;var a=extend_object(r,e);var o=new google.maps.Marker(a);o.fences=n;if(e.infoWindow){o.infoWindow=new google.maps.InfoWindow(e.infoWindow);var l=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var u=0;u<l.length;u++){(function(t,i){if(e.infoWindow[i]){google.maps.event.addListener(t,i,function(t){e.infoWindow[i].apply(this,[t])})}})(o.infoWindow,l[u])}}var c=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var d=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var u=0;u<c.length;u++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(){e[i].apply(this,[this])})}})(o,c[u])}for(var u=0;u<d.length;u++){(function(t,i,n){if(e[n]){google.maps.event.addListener(i,n,function(i){if(!i.pixel){i.pixel=t.getProjection().fromLatLngToPoint(i.latLng)}e[n].apply(this,[i])})}})(this.map,o,d[u])}google.maps.event.addListener(o,"click",function(){this.details=i;if(e.click){e.click.apply(this,[this])}if(o.infoWindow){t.hideInfoWindows();o.infoWindow.open(t.map,o)}});google.maps.event.addListener(o,"rightclick",function(t){t.marker=this;if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu["marker"]!=undefined){C("marker",t)}});if(o.fences){google.maps.event.addListener(o,"dragend",function(){t.checkMarkerGeofence(o,function(e,t){s(e,t)})})}return o}else{throw"No latitude or longitude defined."}};this.addMarker=function(e){var t;if(e.hasOwnProperty("gm_accessors_")){t=e}else{if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position){t=this.createMarker(e)}else{throw"No latitude or longitude defined."}}t.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(t)}this.markers.push(t);n.fire("marker_added",t,this);return t};this.addMarkers=function(e){for(var t=0,i;i=e[t];t++){this.addMarker(i)}return this.markers};this.hideInfoWindows=function(){for(var e=0,t;t=this.markers[e];e++){if(t.infoWindow){t.infoWindow.close()}}};this.removeMarker=function(e){for(var t=0;t<this.markers.length;t++){if(this.markers[t]===e){this.markers[t].setMap(null);this.markers.splice(t,1);n.fire("marker_removed",e,this);break}}return e};this.removeMarkers=function(e){var e=e||this.markers;for(var t=0;t<this.markers.length;t++){if(this.markers[t]===e[t])this.markers[t].setMap(null)}var i=[];for(var t=0;t<this.markers.length;t++){if(this.markers[t].getMap()!=null)i.push(this.markers[t])}this.markers=i};this.drawOverlay=function(e){var i=new google.maps.OverlayView;i.setMap(s.map);var n=true;if(e.auto_show!=null)n=e.auto_show;i.onAdd=function(){var n=t.createElement("div");n.style.borderStyle="none";n.style.borderWidth="0px";n.style.position="absolute";n.style.zIndex=100;n.innerHTML=e.content;i.el=n;var s=this.getPanes();if(!e.layer){e.layer="overlayLayer"}var r=s[e.layer];r.appendChild(n);var a=["contextmenu","DOMMouseScroll","dblclick","mousedown"];for(var o=0;o<a.length;o++){(function(e,t){google.maps.event.addDomListener(e,t,function(e){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){e.cancelBubble=true;e.returnValue=false}else{e.stopPropagation()}})})(n,a[o])}google.maps.event.trigger(this,"ready")};i.draw=function(){var t=this.getProjection();var s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.lat,e.lng));e.horizontalOffset=e.horizontalOffset||0;e.verticalOffset=e.verticalOffset||0;var r=i.el;var a=r.children[0];var o=a.clientHeight;var l=a.clientWidth;switch(e.verticalAlign){case"top":r.style.top=s.y-o+e.verticalOffset+"px";break;default:case"middle":r.style.top=s.y-o/2+e.verticalOffset+"px";break;case"bottom":r.style.top=s.y+e.verticalOffset+"px";break}switch(e.horizontalAlign){case"left":r.style.left=s.x-l+e.horizontalOffset+"px";break;default:case"center":r.style.left=s.x-l/2+e.horizontalOffset+"px";break;case"right":r.style.left=s.x+e.horizontalOffset+"px";break}r.style.display=n?"block":"none";if(!n){e.show.apply(this,[r])}};i.onRemove=function(){var t=i.el;if(e.remove){e.remove.apply(this,[t])}else{i.el.parentNode.removeChild(i.el);i.el=null}};s.overlays.push(i);return i};this.removeOverlay=function(e){for(var t=0;t<this.overlays.length;t++){if(this.overlays[t]===e){this.overlays[t].setMap(null);this.overlays.splice(t,1);break}}};this.removeOverlays=function(){for(var e=0,t;t=s.overlays[e];e++){t.setMap(null)}s.overlays=[]};this.drawPolyline=function(e){var t=[];var i=e.path;if(i.length){if(i[0][0]===undefined){t=i}else{for(var s=0,r;r=i[s];s++){t.push(new google.maps.LatLng(r[0],r[1]))}}}var a={map:this.map,path:t,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,geodesic:e.geodesic,clickable:true,editable:false,visible:true};if(e.hasOwnProperty("clickable"))a.clickable=e.clickable;if(e.hasOwnProperty("editable"))a.editable=e.editable;if(e.hasOwnProperty("icons"))a.icons=e.icons;if(e.hasOwnProperty("zIndex"))a.zIndex=e.zIndex;var o=new google.maps.Polyline(a);var l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var u=0;u<l.length;u++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(t){e[i].apply(this,[t])})}})(o,l[u])}this.polylines.push(o);n.fire("polyline_added",o,this);return o};this.removePolyline=function(e){for(var t=0;t<this.polylines.length;t++){if(this.polylines[t]===e){this.polylines[t].setMap(null);this.polylines.splice(t,1);n.fire("polyline_removed",e,this);break}}};this.removePolylines=function(){for(var e=0,t;t=s.polylines[e];e++){t.setMap(null)}s.polylines=[]};this.drawCircle=function(e){e=extend_object({map:this.map,center:new google.maps.LatLng(e.lat,e.lng)},e);delete e.lat;delete e.lng;var t=new google.maps.Circle(e);var i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<i.length;n++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(t){e[i].apply(this,[t])})}})(t,i[n])}this.polygons.push(t);return t};this.drawRectangle=function(e){e=extend_object({map:this.map},e);var t=new google.maps.LatLngBounds(new google.maps.LatLng(e.bounds[0][0],e.bounds[0][1]),new google.maps.LatLng(e.bounds[1][0],e.bounds[1][1]));e.bounds=t;var i=new google.maps.Rectangle(e);var n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var s=0;s<n.length;s++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(t){e[i].apply(this,[t])})}})(i,n[s])}this.polygons.push(i);return i};this.drawPolygon=function(e){var t=false;if(e.hasOwnProperty("useGeoJSON"))t=e.useGeoJSON;delete e.useGeoJSON;e=extend_object({map:this.map},e);if(t==false)e.paths=[e.paths.slice(0)];if(e.paths.length>0){if(e.paths[0].length>0){e.paths=array_flat(array_map(e.paths,arrayToLatLng,t))}}var i=new google.maps.Polygon(e);var s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var r=0;r<s.length;r++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(t){e[i].apply(this,[t])})}})(i,s[r])}this.polygons.push(i);n.fire("polygon_added",i,this);return i};this.removePolygon=function(e){for(var t=0;t<this.polygons.length;t++){if(this.polygons[t]===e){this.polygons[t].setMap(null);this.polygons.splice(t,1);n.fire("polygon_removed",e,this);break}}};this.removePolygons=function(){for(var e=0,t;t=s.polygons[e];e++){t.setMap(null)}s.polygons=[]};this.getFromFusionTables=function(e){var t=e.events;delete e.events;var i=e;var n=new google.maps.FusionTablesLayer(i);for(var s in t){(function(e,i){google.maps.event.addListener(e,i,function(e){t[i].apply(this,[e])})})(n,s)}this.layers.push(n);return n};this.loadFromFusionTables=function(e){var t=this.getFromFusionTables(e);t.setMap(this.map);return t};this.getFromKML=function(e){var t=e.url;var i=e.events;delete e.url;delete e.events;var n=e;var s=new google.maps.KmlLayer(t,n);for(var r in i){(function(e,t){google.maps.event.addListener(e,t,function(e){i[t].apply(this,[e])})})(s,r)}this.layers.push(s);return s};this.loadFromKML=function(e){var t=this.getFromKML(e);t.setMap(this.map);return t};var L,O;this.getRoutes=function(e){switch(e.travelMode){case"bicycling":L=google.maps.TravelMode.BICYCLING;break;case"transit":L=google.maps.TravelMode.TRANSIT;break;case"driving":L=google.maps.TravelMode.DRIVING;break;default:L=google.maps.TravelMode.WALKING;break}if(e.unitSystem==="imperial"){O=google.maps.UnitSystem.IMPERIAL}else{O=google.maps.UnitSystem.METRIC}var t={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]};var i=extend_object(t,e);i.origin=/string/.test(typeof e.origin)?e.origin:new google.maps.LatLng(e.origin[0],e.origin[1]);i.destination=new google.maps.LatLng(e.destination[0],e.destination[1]);i.travelMode=L;i.unitSystem=O;delete i.callback;var n=this;var s=new google.maps.DirectionsService;s.route(i,function(t,i){if(i===google.maps.DirectionsStatus.OK){for(var s in t.routes){if(t.routes.hasOwnProperty(s)){n.routes.push(t.routes[s])}}}if(e.callback){e.callback(n.routes)}})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(e){e=extend_object({locations:[],path:false,samples:256},e);if(e.locations.length>0){if(e.locations[0].length>0){e.locations=array_flat(array_map([e.locations],arrayToLatLng,false))}}var t=e.callback;delete e.callback;var i=new google.maps.ElevationService;if(!e.path){delete e.path;delete e.samples;i.getElevationForLocations(e,function(e,i){if(t&&typeof t==="function"){t(e,i)}})}else{var n={path:e.locations,samples:e.samples};i.getElevationAlongPath(n,function(e,i){if(t&&typeof t==="function"){t(e,i)}})}};this.cleanRoute=this.removePolylines;this.drawRoute=function(e){var t=this;this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,unitSystem:e.unitSystem,callback:function(i){if(i.length>0){t.drawPolyline({path:i[i.length-1].overview_path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});if(e.callback){e.callback(i[i.length-1])}}}})};this.travelRoute=function(e){if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,callback:function(t){if(t.length>0&&e.start){e.start(t[t.length-1])}if(t.length>0&&e.step){var i=t[t.length-1];if(i.legs.length>0){var n=i.legs[0].steps;for(var s=0,r;r=n[s];s++){r.step_number=s;e.step(r,i.legs[0].steps.length-1)}}}if(t.length>0&&e.end){e.end(t[t.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var t=e.route.legs[0].steps;for(var i=0,n;n=t[i];i++){n.step_number=i;e.step(n)}}}};this.drawSteppedRoute=function(e){if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,callback:function(t){if(t.length>0&&e.start){e.start(t[t.length-1])}if(t.length>0&&e.step){var i=t[t.length-1];if(i.legs.length>0){var n=i.legs[0].steps;for(var r=0,a;a=n[r];r++){a.step_number=r;s.drawPolyline({path:a.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});e.step(a,i.legs[0].steps.length-1)}}}if(t.length>0&&e.end){e.end(t[t.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var t=e.route.legs[0].steps;for(var i=0,n;n=t[i];i++){n.step_number=i;s.drawPolyline({path:n.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});
e.step(n)}}}};this.checkGeofence=function(e,t,i){return i.containsLatLng(new google.maps.LatLng(e,t))};this.checkMarkerGeofence=function(e,t){if(e.fences){for(var i=0,n;n=e.fences[i];i++){var r=e.getPosition();if(!s.checkGeofence(r.lat(),r.lng(),n)){t(e,n)}}}};this.addLayer=function(e,t){t=t||{};var i;switch(e){case"weather":this.singleLayers.weather=i=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=i=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=i=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=i=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=i=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=i=new google.maps.panoramio.PanoramioLayer;i.setTag(t.filter);delete t.filter;if(t.click){google.maps.event.addListener(i,"click",function(e){t.click(e);delete t.click})}break;case"places":this.singleLayers.places=i=new google.maps.places.PlacesService(this.map);if(t.search||t.nearbySearch){var n={bounds:t.bounds||null,keyword:t.keyword||null,location:t.location||null,name:t.name||null,radius:t.radius||null,rankBy:t.rankBy||null,types:t.types||null};if(t.search){i.search(n,t.search)}if(t.nearbySearch){i.nearbySearch(n,t.nearbySearch)}}if(t.textSearch){var s={bounds:t.bounds||null,location:t.location||null,query:t.query||null,radius:t.radius||null};i.textSearch(s,t.textSearch)}break}if(i!==undefined){if(typeof i.setOptions=="function"){i.setOptions(t)}if(typeof i.setMap=="function"){i.setMap(this.map)}return i}};this.removeLayer=function(e){if(typeof e=="string"&&this.singleLayers[e]!==undefined){this.singleLayers[e].setMap(null);delete this.singleLayers[e]}else{for(var t=0;t<this.layers.length;t++){if(this.layers[t]===e){this.layers[t].setMap(null);this.layers.splice(t,1);break}}}};this.toImage=function(e){var e=e||{};var t={};t["size"]=e["size"]||[this.el.clientWidth,this.el.clientHeight];t["lat"]=this.getCenter().lat();t["lng"]=this.getCenter().lng();if(this.markers.length>0){t["markers"]=[];for(var i=0;i<this.markers.length;i++){t["markers"].push({lat:this.markers[i].getPosition().lat(),lng:this.markers[i].getPosition().lng()})}}if(this.polylines.length>0){var s=this.polylines[0];t["polyline"]={};t["polyline"]["path"]=google.maps.geometry.encoding.encodePath(s.getPath());t["polyline"]["strokeColor"]=s.strokeColor;t["polyline"]["strokeOpacity"]=s.strokeOpacity;t["polyline"]["strokeWeight"]=s.strokeWeight}return n.staticMapURL(t)};this.addMapType=function(e,t){if(t.hasOwnProperty("getTileUrl")&&typeof t["getTileUrl"]=="function"){t.tileSize=t.tileSize||new google.maps.Size(256,256);var i=new google.maps.ImageMapType(t);this.map.mapTypes.set(e,i)}else{throw"'getTileUrl' function required."}};this.addOverlayMapType=function(e){if(e.hasOwnProperty("getTile")&&typeof e["getTile"]=="function"){var t=e.index;delete e.index;this.map.overlayMapTypes.insertAt(t,e)}else{throw"'getTile' function required."}};this.removeOverlayMapType=function(e){this.map.overlayMapTypes.removeAt(e)};this.addStyle=function(e){var t=new google.maps.StyledMapType(e.styles,e.styledMapName);this.map.mapTypes.set(e.mapTypeId,t)};this.setStyle=function(e){this.map.setMapTypeId(e)};this.createPanorama=function(e){if(!e.hasOwnProperty("lat")||!e.hasOwnProperty("lng")){e.lat=this.getCenter().lat();e.lng=this.getCenter().lng()}this.panorama=n.createPanorama(e);this.map.setStreetView(this.panorama);return this.panorama};this.on=function(e,t){return n.on(e,this,t)};this.off=function(e){n.off(e,this)}};n.createPanorama=function(e){var t=i(e.el,e.context);e.position=new google.maps.LatLng(e.lat,e.lng);delete e.el;delete e.context;delete e.lat;delete e.lng;var n=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"];var s=extend_object({visible:true},e);for(var r=0;r<n.length;r++){delete s[n[r]]}var a=new google.maps.StreetViewPanorama(t,s);for(var r=0;r<n.length;r++){(function(t,i){if(e[i]){google.maps.event.addListener(t,i,function(){e[i].apply(this)})}})(a,n[r])}return a};n.Route=function(e){this.map=e.map;this.route=e.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight}).getPath();this.back=function(){if(this.step_count>0){this.step_count--;var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.pop()}}}};this.forward=function(){if(this.step_count<this.steps_length){var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.push(e[t])}}this.step_count++}}};n.geolocate=function(e){var t=e.always||e.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(i){e.success(i);if(t){t()}},function(i){e.error(i);if(t){t()}},e.options)}else{e.not_supported();if(t){t()}}};n.geocode=function(e){this.geocoder=new google.maps.Geocoder;var t=e.callback;if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")){e.latLng=new google.maps.LatLng(e.lat,e.lng)}delete e.lat;delete e.lng;delete e.callback;this.geocoder.geocode(e,function(e,i){t(e,i)})};n.staticMapURL=function(e){var t=[];var i;var n="http://maps.googleapis.com/maps/api/staticmap";if(e.url){n=e.url;delete e.url}n+="?";var s=e.markers;delete e.markers;if(!s&&e.marker){s=[e.marker];delete e.marker}var r=e.polyline;delete e.polyline;if(e.center){t.push("center="+e.center);delete e.center}else if(e.address){t.push("center="+e.address);delete e.address}else if(e.lat){t.push(["center=",e.lat,",",e.lng].join(""));delete e.lat;delete e.lng}else if(e.visible){var a=encodeURI(e.visible.join("|"));t.push("visible="+a)}var o=e.size;if(o){if(o.join){o=o.join("x")}delete e.size}else{o="630x300"}t.push("size="+o);if(!e.zoom){e.zoom=15}var l=e.hasOwnProperty("sensor")?!!e.sensor:true;delete e.sensor;t.push("sensor="+l);for(var u in e){if(e.hasOwnProperty(u)){t.push(u+"="+e[u])}}if(s){var c,d;for(var h=0;i=s[h];h++){c=[];if(i.size&&i.size!=="normal"){c.push("size:"+i.size)}else if(i.icon){c.push("icon:"+encodeURI(i.icon))}if(i.color){c.push("color:"+i.color.replace("#","0x"))}if(i.label){c.push("label:"+i.label[0].toUpperCase())}d=i.address?i.address:i.lat+","+i.lng;if(c.length||h===0){c.push(d);c=c.join("|");t.push("markers="+encodeURI(c))}else{c=t.pop()+encodeURI("|"+d);t.push(c)}}}function f(e,t){if(e[0]==="#"){e=e.replace("#","0x");if(t){t=parseFloat(t);t=Math.min(1,Math.max(t,0));if(t===0){return"0x00000000"}t=(t*255).toString(16);if(t.length===1){t+=t}e=e.slice(0,8)+t}}return e}if(r){i=r;r=[];if(i.strokeWeight){r.push("weight:"+parseInt(i.strokeWeight,10))}if(i.strokeColor){var p=f(i.strokeColor,i.strokeOpacity);r.push("color:"+p)}if(i.fillColor){var g=f(i.fillColor,i.fillOpacity);r.push("fillcolor:"+g)}var m=i.path;if(m.join){for(var v=0,y;y=m[v];v++){r.push(y.join(","))}}else{r.push("enc:"+m)}r=r.join("|");t.push("path="+encodeURI(r))}t=t.join("&");return n+t};n.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];n.on=function(e,t,i){if(n.custom_events.indexOf(e)==-1){return google.maps.event.addListener(t,e,i)}else{var s={handler:i,eventName:e};t.registered_events[e]=t.registered_events[e]||[];t.registered_events[e].push(s);return s}};n.off=function(e,t){if(n.custom_events.indexOf(e)==-1){google.maps.event.clearListeners(t,e)}else{t.registered_events[e]=[]}};n.fire=function(e,t,i){if(n.custom_events.indexOf(e)==-1){google.maps.event.trigger(t,e,Array.prototype.slice.apply(arguments).slice(2))}else{if(e in i.registered_events){var s=i.registered_events[e];for(var r=0;r<s.length;r++){(function(e,t,i){e.apply(t,[i])})(s[r]["handler"],i,t)}}}};if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(e){var t=new google.maps.LatLngBounds;var i=this.getPaths();var n;for(var s=0;s<i.getLength();s++){n=i.getAt(s);for(var r=0;r<n.getLength();r++){t.extend(n.getAt(r))}}return t}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(e){var t=this.getBounds();if(t!==null&&!t.contains(e)){return false}var i=false;var n=this.getPaths().getLength();for(var s=0;s<n;s++){var r=this.getPaths().getAt(s);var a=r.getLength();var o=a-1;for(var l=0;l<a;l++){var u=r.getAt(l);var c=r.getAt(o);if(u.lng()<e.lng()&&c.lng()>=e.lng()||c.lng()<e.lng()&&u.lng()>=e.lng()){if(u.lat()+(e.lng()-u.lng())/(c.lng()-u.lng())*(c.lat()-u.lat())<e.lat()){i=!i}}o=l}}return i}}google.maps.LatLngBounds.prototype.containsLatLng=function(e){return this.contains(e)};google.maps.Marker.prototype.setFences=function(e){this.fences=e};google.maps.Marker.prototype.addFence=function(e){this.fences.push(e)};return n}(this);var coordsToLatLngs=function(e,t){var i=e[0];var n=e[1];if(t){i=e[1];n=e[0]}return new google.maps.LatLng(i,n)};var arrayToLatLng=function(e,t){for(var i=0;i<e.length;i++){if(e[i].length>0&&typeof e[i][0]!="number"){e[i]=arrayToLatLng(e[i],t)}else{e[i]=coordsToLatLngs(e[i],t)}}return e};var extend_object=function(e,t){if(e===t)return e;for(var i in t){e[i]=t[i]}return e};var replace_object=function(e,t){if(e===t)return e;for(var i in t){if(e[i]!=undefined)e[i]=t[i]}return e};var array_map=function(e,t){var i=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&e.map===Array.prototype.map){return Array.prototype.map.call(e,function(e){callback_params=i;callback_params.splice(0,0,e);return t.apply(this,callback_params)})}else{var n=[];var s=e.length;for(var r=0;r<s;r++){callback_params=i;callback_params=callback_params.splice(0,0,e[r]);n.push(t.apply(this,callback_params))}return n}};var array_flat=function(e){new_array=[];for(var t=0;t<e.length;t++){new_array=new_array.concat(e[t])}return new_array}}else{throw"Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true."}