!function(t){"use strict";var e=function(t){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than %s.",max:"This value should be lower than %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(t)};e.prototype={constructor:e,validators:{notnull:function(t){return t.length>0},notblank:function(t){return null!==t&&""!==t.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(t){if("object"===typeof t){for(var e in t){if(this.required(t[e])){return true}}return false}return this.notnull(t)&&this.notblank(t)},type:function(t,e){var i;switch(e){case"number":i=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":i=/^\d+$/;break;case"alphanum":i=/^\w+$/;break;case"email":i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":t=new RegExp("(https?|s?ftp|git)","i").test(t)?t:"http://"+t;case"urlstrict":i=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":i=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":i=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return false}return""!==t?i.test(t):false},regexp:function(t,e,i){return new RegExp(e,i.options.regexpFlag||"").test(t)},minlength:function(t,e){return t.length>=e},maxlength:function(t,e){return t.length<=e},rangelength:function(t,e){return this.minlength(t,e[0])&&this.maxlength(t,e[1])},min:function(t,e){return Number(t)>=e},max:function(t,e){return Number(t)<=e},range:function(t,e){return t>=e[0]&&t<=e[1]},equalto:function(e,i,s){s.options.validateIfUnchanged=true;return e===t(i).val()},remote:function(e,i,s){var n=null,r={},a={};r[s.$element.attr("name")]=e;if("undefined"!==typeof s.options.remoteDatatype){a={dataType:s.options.remoteDatatype}}var o=function(e,i){if("undefined"!==typeof i&&"undefined"!==typeof s.Validator.messages.remote&&i!==s.Validator.messages.remote){t(s.ulError+" .remote").remove()}s.updtConstraint({name:"remote",valid:e},i);s.manageValidationResult()};var u=function(e){if("object"===typeof e){return e}try{e=t.parseJSON(e)}catch(i){}return e};var l=function(t){return"object"===typeof t&&null!==t?"undefined"!==typeof t.error?t.error:"undefined"!==typeof t.message?t.message:null:null};t.ajax(t.extend({},{url:i,data:r,type:s.options.remoteMethod||"GET",success:function(t){t=u(t);o(1===t||true===t||"object"===typeof t&&null!==t&&"undefined"!==typeof t.success,l(t))},error:function(t){t=u(t);o(false,l(t))}},a));return n},mincheck:function(t,e){return this.minlength(t,e)},maxcheck:function(t,e){return this.maxlength(t,e)},rangecheck:function(t,e){return this.rangelength(t,e)}},init:function(t){var e=t.validators,i=t.messages;var s;for(s in e){this.addValidator(s,e[s])}for(s in i){this.addMessage(s,i[s])}},formatMesssage:function(t,e){if("object"===typeof e){for(var i in e){t=this.formatMesssage(t,e[i])}return t}return"string"===typeof t?t.replace(new RegExp("%s","i"),e):""},addValidator:function(t,e){this.validators[t]=e},addMessage:function(t,e,i){if("undefined"!==typeof i&&true===i){this.messages.type[t]=e;return}if("type"===t){for(var s in e){this.messages.type[s]=e[s]}return}this.messages[t]=e}};var i=function(t,i,s){this.options=i;this.Validator=new e(i);if(s==="ParsleyFieldMultiple"){return this}this.init(t,s||"ParsleyField")};i.prototype={constructor:i,init:function(e,i){this.type=i;this.valid=true;this.element=e;this.validatedOnce=false;this.$element=t(e);this.val=this.$element.val();this.isRequired=false;this.constraints={};if("undefined"===typeof this.isRadioOrCheckbox){this.isRadioOrCheckbox=false;this.hash=this.generateHash();this.errorClassHandler=this.options.errors.classHandler(e,this.isRadioOrCheckbox)||this.$element}this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();if(this.hasConstraints()){this.bindValidationEvents()}},setParent:function(e){this.$parent=t(e)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required")){this.options.required=true}if("undefined"!==typeof this.$element.attr("type")&&new RegExp(this.$element.attr("type"),"i").test("email url number range")){this.options.type=this.$element.attr("type");if(new RegExp(this.options.type,"i").test("number range")){this.options.type="number";if("undefined"!==typeof this.$element.attr("min")&&this.$element.attr("min").length){this.options.min=this.$element.attr("min")}if("undefined"!==typeof this.$element.attr("max")&&this.$element.attr("max").length){this.options.max=this.$element.attr("max")}}}if("string"===typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length){this.options.regexp=this.$element.attr("pattern")}},addConstraints:function(){for(var t in this.options){var e={};e[t]=this.options[t];this.addConstraint(e,true)}},addConstraint:function(t,e){for(var i in t){i=i.toLowerCase();if("function"===typeof this.Validator.validators[i]){this.constraints[i]={name:i,requirements:t[i],valid:null};if(i==="required"){this.isRequired=true}this.addCustomConstraintMessage(i)}}if("undefined"===typeof e){this.bindValidationEvents()}},updateConstraint:function(t,e){for(var i in t){this.updtConstraint({name:i,requirements:t[i],valid:null},e)}},updtConstraint:function(e,i){this.constraints[e.name]=t.extend(true,this.constraints[e.name],e);if("string"===typeof i){this.Validator.messages[e.name]=i}this.bindValidationEvents()},removeConstraint:function(t){var t=t.toLowerCase();delete this.constraints[t];if(t==="required"){this.isRequired=false}if(!this.hasConstraints()){if("ParsleyForm"===typeof this.getParent()){this.getParent().removeItem(this.$element);return}this.destroy();return}this.bindValidationEvents()},addCustomConstraintMessage:function(t){var e=t+("type"===t&&"undefined"!==typeof this.options[t]?this.options[t].charAt(0).toUpperCase()+this.options[t].substr(1):"")+"Message";if("undefined"!==typeof this.options[e]){this.Validator.addMessage("type"===t?this.options[t]:t,this.options[e],"type"===t)}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);if(this.options.remote&&!new RegExp("change","i").test(this.options.trigger)){this.options.trigger=!this.options.trigger?"change":" change"}var e=(!this.options.trigger?"":this.options.trigger)+(new RegExp("key","i").test(this.options.trigger)?"":" keyup");if(this.$element.is("select")){e+=new RegExp("change","i").test(e)?"":" change"}e=e.replace(/^\s+/g,"").replace(/\s+$/g,"");this.$element.on((e+" ").split(" ").join("."+this.type+" "),false,t.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.val()},eventValidation:function(t){var e=this.getVal();if(t.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(t.type==="change"&&!/change/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(!this.isRadioOrCheckbox&&e.length<this.options.validationMinlength&&!this.validatedOnce){return true}this.validate(true)},isValid:function(){return this.validate(false)},hasConstraints:function(){for(var t in this.constraints){return true}return false},validate:function(t){var e=this.getVal(),i=null;if(!this.hasConstraints()){return null}if(this.options.listeners.onFieldValidate(this.element,this)||""===e&&!this.isRequired){this.reset();return null}if(!this.needsValidation(e)){return this.valid}this.errorBubbling="undefined"!==typeof t?t:true;i=this.applyValidators();if(this.errorBubbling){this.manageValidationResult()}return i},needsValidation:function(t){if(!this.options.validateIfUnchanged&&this.valid!==null&&this.val===t&&this.validatedOnce){return false}this.val=t;return this.validatedOnce=true},applyValidators:function(){var t=null;for(var e in this.constraints){var i=this.Validator.validators[this.constraints[e].name](this.val,this.constraints[e].requirements,this);if(false===i){t=false;this.constraints[e].valid=t}else if(true===i){this.constraints[e].valid=true;t=false!==t}}return t},manageValidationResult:function(){var t=null;for(var e in this.constraints){if(false===this.constraints[e].valid){this.manageError(this.constraints[e]);t=false}else if(true===this.constraints[e].valid){this.removeError(this.constraints[e].name);t=false!==t}}this.valid=t;if(true===this.valid){this.removeErrors();this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);this.options.listeners.onFieldSuccess(this.element,this.constraints,this);return true}else if(false===this.valid){this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);this.options.listeners.onFieldError(this.element,this.constraints,this);return false}return t},ulErrorManagement:function(){this.ulError="#"+this.hash;this.ulTemplate=t(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(e){var i=this.ulError+" ."+e;this.options.animate?t(i).fadeOut(this.options.animateDuration,function(){t(this).remove()}):t(i).remove();if(this.ulError&&t(this.ulError).children().length===0){this.removeErrors()}},addError:function(e){for(var i in e){var s=t(this.options.errors.errorElem).addClass(i);t(this.ulError).append(this.options.animate?t(s).text(e[i]).hide().fadeIn(this.options.animateDuration):t(s).text(e[i]))}},removeErrors:function(){this.options.animate?t(this.ulError).fadeOut(this.options.animateDuration,function(){t(this).remove()}):t(this.ulError).remove()},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=false;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var t in this.constraints){this.constraints[t].valid=null}return this},manageError:function(e){if(!t(this.ulError).length){this.manageErrorContainer()}if("required"===e.name&&null!==this.getVal()&&this.getVal().length>0){return}else if(this.isRequired&&"required"!==e.name&&(null===this.getVal()||0===this.getVal().length)){return}var i=e.name,s=false!==this.options.errorMessage?"custom-error-message":i,n={},r=false!==this.options.errorMessage?this.options.errorMessage:e.name==="type"?this.Validator.messages[i][e.requirements]:"undefined"===typeof this.Validator.messages[i]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[i],e.requirements);if(!t(this.ulError+" ."+s).length){n[s]=r;this.addError(n)}},manageErrorContainer:function(){var e=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),i=this.options.animate?this.ulTemplate.show():this.ulTemplate;if("undefined"!==typeof e){t(e).append(i);return}!this.isRadioOrCheckbox?this.$element.after(i):this.$element.parent().after(i)},addListener:function(t){for(var e in t){this.options.listeners[e]=t[e]}},destroy:function(){this.$element.removeClass("parsley-validated");this.reset().$element.off("."+this.type).removeData(this.type)}};var s=function(t,i,s){this.initMultiple(t,i);this.inherit(t,i);this.Validator=new e(i);this.init(t,s||"ParsleyFieldMultiple")};s.prototype={constructor:s,initMultiple:function(e,i){this.element=e;this.$element=t(e);this.group=i.group||false;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]';this.isRadioOrCheckbox=true;this.isRadio=this.$element.is("input[type=radio]");this.isCheckbox=this.$element.is("input[type=checkbox]");this.errorClassHandler=i.errors.classHandler(e,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(t,e){var s=new i(t,e,"ParsleyFieldMultiple");for(var n in s){if("undefined"===typeof this[n]){this[n]=s[n]}}},getName:function(){if(this.group){return"parsley-"+this.group}if("undefined"===typeof this.$element.attr("name")){throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !"}return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio){return t(this.siblings+":checked").val()||""}if(this.isCheckbox){var e=[];t(this.siblings+":checked").each(function(){e.push(t(this).val())});return e}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);var e=this,i=(!this.options.trigger?"":this.options.trigger)+(new RegExp("change","i").test(this.options.trigger)?"":" change");i=i.replace(/^\s+/g,"").replace(/\s+$/g,"");t(this.siblings).each(function(){t(this).on(i.split(" ").join("."+e.type+" "),false,t.proxy(e.eventValidation,e))})}};var n=function(t,e,i){this.init(t,e,i||"parsleyForm")};n.prototype={constructor:n,init:function(e,i,s){this.type=s;this.items=[];this.$element=t(e);this.options=i;var n=this;this.$element.find(i.inputs).each(function(){n.addItem(this)});this.$element.on("submit."+this.type,false,t.proxy(this.validate,this))},addListener:function(t){for(var e in t){if(new RegExp("Field").test(e)){for(var i=0;i<this.items.length;i++){this.items[i].addListener(t)}}else{this.options.listeners[e]=t[e]}}},addItem:function(e){if(t(e).is(this.options.excluded)){return false}var i=t(e).parsley(this.options);i.setParent(this);this.items.push(i)},removeItem:function(e){var i=t(e).parsley();for(var s=0;s<this.items.length;s++){if(this.items[s].hash===i.hash){this.items[s].destroy();this.items.splice(s,1);return true}}return false},validate:function(t){var e=true;this.focusedField=false;for(var i=0;i<this.items.length;i++){if("undefined"!==typeof this.items[i]&&false===this.items[i].validate()){e=false;if(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus){this.focusedField=this.items[i].$element}}}if(this.focusedField&&!e){this.focusedField.focus()}this.options.listeners.onFormSubmit(e,t,this);return e},isValid:function(){for(var t=0;t<this.items.length;t++){if(false===this.items[t].isValid()){return false}}return true},removeErrors:function(){for(var t=0;t<this.items.length;t++){this.items[t].parsley("reset")}},destroy:function(){for(var t=0;t<this.items.length;t++){this.items[t].destroy()}this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var t=0;t<this.items.length;t++){this.items[t].reset()}}};t.fn.parsley=function(e,r){var a=t.extend(true,{},t.fn.parsley.defaults,"undefined"!==typeof window.ParsleyConfig?window.ParsleyConfig:{},e,this.data()),o=null;function u(o,u){var l=t(o).data(u);if(!l){switch(u){case"parsleyForm":l=new n(o,a,"parsleyForm");break;case"parsleyField":l=new i(o,a,"parsleyField");break;case"parsleyFieldMultiple":l=new s(o,a,"parsleyFieldMultiple");break;default:return}t(o).data(u,l)}if("string"===typeof e&&"function"===typeof l[e]){var h=l[e](r);return"undefined"!==typeof h?h:t(o)}return l}if(t(this).is("form")){o=u(t(this),"parsleyForm")}else if(t(this).is(a.inputs)&&!t(this).is(a.excluded)){o=u(t(this),!t(this).is("input[type=radio], input[type=checkbox]")?"parsleyField":"parsleyFieldMultiple")}return"function"===typeof r?r():o};t.fn.parsley.Constructor=n;t.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:false,animate:true,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:false,validators:{},messages:{},validateIfUnchanged:false,errors:{classHandler:function(t,e){},container:function(t,e){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(t,e){return false},onFormSubmit:function(t,e,i){},onFieldError:function(t,e,i){},onFieldSuccess:function(t,e,i){}}};t(window).on("load",function(){t('[data-validate="parsley"]').each(function(){t(this).parsley()})})}(window.jQuery||window.Zepto);