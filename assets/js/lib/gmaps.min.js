if(window.google&&window.google.maps){var GMaps=function(e){"use strict";var t=document;var o=function(o,n){var a;if("jQuery"in e&&n){a=$("#"+o.replace("#",""),n)[0]}else{a=t.getElementById(o.replace("#",""))}return a};var n=function(e){var a=this;var i=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"];var r=["mousemove","mouseout","mouseover"];window.context_menu={};if(typeof e.el==="string"||typeof e.div==="string"){this.el=o(e.el||e.div,e.context)}else{this.el=e.el||e.div}if(typeof this.el==="undefined"||this.el===null){throw"No element defined."}this.el.style.width=e.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=e.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=e.zoom||15;this.registered_events={};var s=e.markerClusterer;var l;if(e.mapType){l=google.maps.MapTypeId[e.mapType.toUpperCase()]}else{l=google.maps.MapTypeId.ROADMAP}var p=new google.maps.LatLng(e.lat,e.lng);delete e.el;delete e.lat;delete e.lng;delete e.mapType;delete e.width;delete e.height;delete e.markerClusterer;var g=e.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"};var c=e.zoomControl||true,h=g.style||"DEFAULT",f=g.position||"TOP_LEFT",u=e.panControl||true,d=e.mapTypeControl||true,m=e.scaleControl||true,v=e.streetViewControl||true,y=y||true;var k={};var w={zoom:this.zoom,center:p,mapTypeId:l};var L={panControl:u,zoomControl:c,zoomControlOptions:{style:google.maps.ZoomControlStyle[h],position:google.maps.ControlPosition[f]},mapTypeControl:d,scaleControl:m,streetViewControl:v,overviewMapControl:y};if(e.disableDefaultUI!=true)w=extend_object(w,L);k=extend_object(w,e);for(var b=0;b<i.length;b++){delete k[i[b]]}for(var b=0;b<r.length;b++){delete k[r[b]]}this.map=new google.maps.Map(this.el,k);if(s){this.markerClusterer=s.apply(this,[this.map])}var _=function(e){var t=0;var o=0;if(e.offsetParent){do{t+=e.offsetLeft;o+=e.offsetTop}while(e=e.offsetParent)}return[t,o]};var x=function(e,t){var n="";var i=window.context_menu[e];for(var r in i){if(i.hasOwnProperty(r)){var s=i[r];n+='<li><a id="'+e+"_"+r+'" href="#">'+s.title+"</a></li>"}}if(!o("gmaps_context_menu"))return;var l=o("gmaps_context_menu");l.innerHTML=n;var p=l.getElementsByTagName("a");var g=p.length;for(var r=0;r<g;r++){var c=p[r];var h=function(o){o.preventDefault();i[this.id.replace(e+"_","")].action.apply(a,[t]);a.hideContextMenu()};google.maps.event.clearListeners(c,"click");google.maps.event.addDomListenerOnce(c,"click",h,false)}var f=_.apply(this,[a.el]);var u=f[0]+t.pixel.x-15;var d=f[1]+t.pixel.y-15;l.style.left=u+"px";l.style.top=d+"px";l.style.display="block"};var M=function(e,t){if(e==="marker"){t.pixel={};var o=new google.maps.OverlayView;o.setMap(a.map);o.draw=function(){var n=o.getProjection();var a=t.marker.getPosition();t.pixel=n.fromLatLngToContainerPixel(a);x(e,t)}}else{x(e,t)}};this.setContextMenu=function(e){window.context_menu[e.control]={};for(var n in e.options){if(e.options.hasOwnProperty(n)){var a=e.options[n];window.context_menu[e.control][a.name]={title:a.title,action:a.action}}}var i=t.createElement("ul");i.id="gmaps_context_menu";i.style.display="none";i.style.position="absolute";i.style.minWidth="100px";i.style.background="white";i.style.listStyle="none";i.style.padding="8px";i.style.boxShadow="2px 2px 6px #ccc";t.body.appendChild(i);var r=o("gmaps_context_menu");google.maps.event.addDomListener(r,"mouseout",function(e){if(!e.relatedTarget||!this.contains(e.relatedTarget)){window.setTimeout(function(){r.style.display="none"},400)}},false)};this.hideContextMenu=function(){var e=o("gmaps_context_menu");if(e)e.style.display="none"};var P=function(t,o){google.maps.event.addListener(t,o,function(t){if(t==undefined){t=this}e[o].apply(this,[t]);a.hideContextMenu()})};for(var O=0;O<i.length;O++){var C=i[O];if(C in e){P(this.map,C)}}for(var O=0;O<r.length;O++){var C=r[O];if(C in e){P(this.map,C)}}google.maps.event.addListener(this.map,"rightclick",function(t){if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu["map"]!=undefined){M("map",t)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var e=[];var t=this.markers.length;for(var o=0;o<t;o++){e.push(this.markers[o].getPosition())}this.fitLatLngBounds(e)};this.fitLatLngBounds=function(e){var t=e.length;var o=new google.maps.LatLngBounds;for(var n=0;n<t;n++){o.extend(e[n])}this.map.fitBounds(o)};this.setCenter=function(e,t,o){this.map.panTo(new google.maps.LatLng(e,t));if(o){o()}};this.getElement=function(){return this.el};this.zoomIn=function(e){e=e||1;this.zoom=this.map.getZoom()+e;this.map.setZoom(this.zoom)};this.zoomOut=function(e){e=e||1;this.zoom=this.map.getZoom()-e;this.map.setZoom(this.zoom)};var T=[];for(var z in this.map){if(typeof this.map[z]=="function"&&!this[z]){T.push(z)}}for(var b=0;b<T.length;b++){(function(e,t,o){e[o]=function(){return t[o].apply(t,arguments)}})(this,this.map,T[b])}this.createControl=function(e){var o=t.createElement("div");o.style.cursor="pointer";o.style.fontFamily="Arial, sans-serif";o.style.fontSize="13px";o.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var n in e.style)o.style[n]=e.style[n];if(e.id){o.id=e.id}if(e.classes){o.className=e.classes}if(e.content){o.innerHTML=e.content}for(var a in e.events){(function(t,o){google.maps.event.addDomListener(t,o,function(){e.events[o].apply(this,[this])})})(o,a)}o.index=1;return o};this.addControl=function(e){var t=google.maps.ControlPosition[e.position.toUpperCase()];delete e.position;var o=this.createControl(e);this.controls.push(o);this.map.controls[t].push(o);return o};this.createMarker=function(e){if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position){var t=this;var o=e.details;var n=e.fences;var a=e.outside;var i={position:new google.maps.LatLng(e.lat,e.lng),map:null};delete e.lat;delete e.lng;delete e.fences;delete e.outside;var r=extend_object(i,e);var s=new google.maps.Marker(r);s.fences=n;if(e.infoWindow){s.infoWindow=new google.maps.InfoWindow(e.infoWindow);var l=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var p=0;p<l.length;p++){(function(t,o){if(e.infoWindow[o]){google.maps.event.addListener(t,o,function(t){e.infoWindow[o].apply(this,[t])})}})(s.infoWindow,l[p])}}var g=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var c=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var p=0;p<g.length;p++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(){e[o].apply(this,[this])})}})(s,g[p])}for(var p=0;p<c.length;p++){(function(t,o,n){if(e[n]){google.maps.event.addListener(o,n,function(o){if(!o.pixel){o.pixel=t.getProjection().fromLatLngToPoint(o.latLng)}e[n].apply(this,[o])})}})(this.map,s,c[p])}google.maps.event.addListener(s,"click",function(){this.details=o;if(e.click){e.click.apply(this,[this])}if(s.infoWindow){t.hideInfoWindows();s.infoWindow.open(t.map,s)}});google.maps.event.addListener(s,"rightclick",function(t){t.marker=this;if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu["marker"]!=undefined){M("marker",t)}});if(s.fences){google.maps.event.addListener(s,"dragend",function(){t.checkMarkerGeofence(s,function(e,t){a(e,t)})})}return s}else{throw"No latitude or longitude defined."}};this.addMarker=function(e){var t;if(e.hasOwnProperty("gm_accessors_")){t=e}else{if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position){t=this.createMarker(e)}else{throw"No latitude or longitude defined."}}t.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(t)}this.markers.push(t);n.fire("marker_added",t,this);return t};this.addMarkers=function(e){for(var t=0,o;o=e[t];t++){this.addMarker(o)}return this.markers};this.hideInfoWindows=function(){for(var e=0,t;t=this.markers[e];e++){if(t.infoWindow){t.infoWindow.close()}}};this.removeMarker=function(e){for(var t=0;t<this.markers.length;t++){if(this.markers[t]===e){this.markers[t].setMap(null);this.markers.splice(t,1);n.fire("marker_removed",e,this);break}}return e};this.removeMarkers=function(e){var e=e||this.markers;for(var t=0;t<this.markers.length;t++){if(this.markers[t]===e[t])this.markers[t].setMap(null)}var o=[];for(var t=0;t<this.markers.length;t++){if(this.markers[t].getMap()!=null)o.push(this.markers[t])}this.markers=o};this.drawOverlay=function(e){var o=new google.maps.OverlayView;o.setMap(a.map);var n=true;if(e.auto_show!=null)n=e.auto_show;o.onAdd=function(){var n=t.createElement("div");n.style.borderStyle="none";n.style.borderWidth="0px";n.style.position="absolute";n.style.zIndex=100;n.innerHTML=e.content;o.el=n;var a=this.getPanes();if(!e.layer){e.layer="overlayLayer"}var i=a[e.layer];i.appendChild(n);var r=["contextmenu","DOMMouseScroll","dblclick","mousedown"];for(var s=0;s<r.length;s++){(function(e,t){google.maps.event.addDomListener(e,t,function(e){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){e.cancelBubble=true;e.returnValue=false}else{e.stopPropagation()}})})(n,r[s])}google.maps.event.trigger(this,"ready")};o.draw=function(){var t=this.getProjection();var a=t.fromLatLngToDivPixel(new google.maps.LatLng(e.lat,e.lng));e.horizontalOffset=e.horizontalOffset||0;e.verticalOffset=e.verticalOffset||0;var i=o.el;var r=i.children[0];var s=r.clientHeight;var l=r.clientWidth;switch(e.verticalAlign){case"top":i.style.top=a.y-s+e.verticalOffset+"px";break;default:case"middle":i.style.top=a.y-s/2+e.verticalOffset+"px";break;case"bottom":i.style.top=a.y+e.verticalOffset+"px";break}switch(e.horizontalAlign){case"left":i.style.left=a.x-l+e.horizontalOffset+"px";break;default:case"center":i.style.left=a.x-l/2+e.horizontalOffset+"px";break;case"right":i.style.left=a.x+e.horizontalOffset+"px";break}i.style.display=n?"block":"none";if(!n){e.show.apply(this,[i])}};o.onRemove=function(){var t=o.el;if(e.remove){e.remove.apply(this,[t])}else{o.el.parentNode.removeChild(o.el);o.el=null}};a.overlays.push(o);return o};this.removeOverlay=function(e){for(var t=0;t<this.overlays.length;t++){if(this.overlays[t]===e){this.overlays[t].setMap(null);this.overlays.splice(t,1);break}}};this.removeOverlays=function(){for(var e=0,t;t=a.overlays[e];e++){t.setMap(null)}a.overlays=[]};this.drawPolyline=function(e){var t=[];var o=e.path;if(o.length){if(o[0][0]===undefined){t=o}else{for(var a=0,i;i=o[a];a++){t.push(new google.maps.LatLng(i[0],i[1]))}}}var r={map:this.map,path:t,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,geodesic:e.geodesic,clickable:true,editable:false,visible:true};if(e.hasOwnProperty("clickable"))r.clickable=e.clickable;if(e.hasOwnProperty("editable"))r.editable=e.editable;if(e.hasOwnProperty("icons"))r.icons=e.icons;if(e.hasOwnProperty("zIndex"))r.zIndex=e.zIndex;var s=new google.maps.Polyline(r);var l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var p=0;p<l.length;p++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(s,l[p])}this.polylines.push(s);n.fire("polyline_added",s,this);return s};this.removePolyline=function(e){for(var t=0;t<this.polylines.length;t++){if(this.polylines[t]===e){this.polylines[t].setMap(null);this.polylines.splice(t,1);n.fire("polyline_removed",e,this);break}}};this.removePolylines=function(){for(var e=0,t;t=a.polylines[e];e++){t.setMap(null)}a.polylines=[]};this.drawCircle=function(e){e=extend_object({map:this.map,center:new google.maps.LatLng(e.lat,e.lng)},e);delete e.lat;delete e.lng;var t=new google.maps.Circle(e);var o=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var n=0;n<o.length;n++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(t,o[n])}this.polygons.push(t);return t};this.drawRectangle=function(e){e=extend_object({map:this.map},e);var t=new google.maps.LatLngBounds(new google.maps.LatLng(e.bounds[0][0],e.bounds[0][1]),new google.maps.LatLng(e.bounds[1][0],e.bounds[1][1]));e.bounds=t;var o=new google.maps.Rectangle(e);var n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var a=0;a<n.length;a++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(o,n[a])}this.polygons.push(o);return o};this.drawPolygon=function(e){var t=false;if(e.hasOwnProperty("useGeoJSON"))t=e.useGeoJSON;delete e.useGeoJSON;e=extend_object({map:this.map},e);if(t==false)e.paths=[e.paths.slice(0)];if(e.paths.length>0){if(e.paths[0].length>0){e.paths=array_flat(array_map(e.paths,arrayToLatLng,t))}}var o=new google.maps.Polygon(e);var a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var i=0;i<a.length;i++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(o,a[i])}this.polygons.push(o);n.fire("polygon_added",o,this);return o};this.removePolygon=function(e){for(var t=0;t<this.polygons.length;t++){if(this.polygons[t]===e){this.polygons[t].setMap(null);this.polygons.splice(t,1);n.fire("polygon_removed",e,this);break}}};this.removePolygons=function(){for(var e=0,t;t=a.polygons[e];e++){t.setMap(null)}a.polygons=[]};this.getFromFusionTables=function(e){var t=e.events;delete e.events;var o=e;var n=new google.maps.FusionTablesLayer(o);for(var a in t){(function(e,o){google.maps.event.addListener(e,o,function(e){t[o].apply(this,[e])})})(n,a)}this.layers.push(n);return n};this.loadFromFusionTables=function(e){var t=this.getFromFusionTables(e);t.setMap(this.map);return t};this.getFromKML=function(e){var t=e.url;var o=e.events;delete e.url;delete e.events;var n=e;var a=new google.maps.KmlLayer(t,n);for(var i in o){(function(e,t){google.maps.event.addListener(e,t,function(e){o[t].apply(this,[e])})})(a,i)}this.layers.push(a);return a};this.loadFromKML=function(e){var t=this.getFromKML(e);t.setMap(this.map);return t};var S,W;this.getRoutes=function(e){switch(e.travelMode){case"bicycling":S=google.maps.TravelMode.BICYCLING;break;case"transit":S=google.maps.TravelMode.TRANSIT;break;case"driving":S=google.maps.TravelMode.DRIVING;break;default:S=google.maps.TravelMode.WALKING;break}if(e.unitSystem==="imperial"){W=google.maps.UnitSystem.IMPERIAL}else{W=google.maps.UnitSystem.METRIC}var t={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]};var o=extend_object(t,e);o.origin=/string/.test(typeof e.origin)?e.origin:new google.maps.LatLng(e.origin[0],e.origin[1]);o.destination=new google.maps.LatLng(e.destination[0],e.destination[1]);o.travelMode=S;o.unitSystem=W;delete o.callback;var n=this;var a=new google.maps.DirectionsService;a.route(o,function(t,o){if(o===google.maps.DirectionsStatus.OK){for(var a in t.routes){if(t.routes.hasOwnProperty(a)){n.routes.push(t.routes[a])}}}if(e.callback){e.callback(n.routes)}})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(e){e=extend_object({locations:[],path:false,samples:256},e);if(e.locations.length>0){if(e.locations[0].length>0){e.locations=array_flat(array_map([e.locations],arrayToLatLng,false))}}var t=e.callback;delete e.callback;var o=new google.maps.ElevationService;if(!e.path){delete e.path;delete e.samples;o.getElevationForLocations(e,function(e,o){if(t&&typeof t==="function"){t(e,o)}})}else{var n={path:e.locations,samples:e.samples};o.getElevationAlongPath(n,function(e,o){if(t&&typeof t==="function"){t(e,o)}})}};this.cleanRoute=this.removePolylines;this.drawRoute=function(e){var t=this;this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,unitSystem:e.unitSystem,callback:function(o){if(o.length>0){t.drawPolyline({path:o[o.length-1].overview_path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});if(e.callback){e.callback(o[o.length-1])}}}})};this.travelRoute=function(e){if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,callback:function(t){if(t.length>0&&e.start){e.start(t[t.length-1])}if(t.length>0&&e.step){var o=t[t.length-1];if(o.legs.length>0){var n=o.legs[0].steps;for(var a=0,i;i=n[a];a++){i.step_number=a;e.step(i,o.legs[0].steps.length-1)}}}if(t.length>0&&e.end){e.end(t[t.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var t=e.route.legs[0].steps;for(var o=0,n;n=t[o];o++){n.step_number=o;e.step(n)}}}};this.drawSteppedRoute=function(e){if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,callback:function(t){if(t.length>0&&e.start){e.start(t[t.length-1])}if(t.length>0&&e.step){var o=t[t.length-1];if(o.legs.length>0){var n=o.legs[0].steps;for(var i=0,r;r=n[i];i++){r.step_number=i;a.drawPolyline({path:r.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});e.step(r,o.legs[0].steps.length-1)}}}if(t.length>0&&e.end){e.end(t[t.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var t=e.route.legs[0].steps;for(var o=0,n;n=t[o];o++){n.step_number=o;a.drawPolyline({path:n.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight});e.step(n)}}}};this.checkGeofence=function(e,t,o){return o.containsLatLng(new google.maps.LatLng(e,t))};this.checkMarkerGeofence=function(e,t){if(e.fences){for(var o=0,n;n=e.fences[o];o++){var i=e.getPosition();if(!a.checkGeofence(i.lat(),i.lng(),n)){t(e,n)}}}};this.addLayer=function(e,t){t=t||{};var o;switch(e){case"weather":this.singleLayers.weather=o=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=o=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=o=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=o=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=o=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=o=new google.maps.panoramio.PanoramioLayer;o.setTag(t.filter);delete t.filter;if(t.click){google.maps.event.addListener(o,"click",function(e){t.click(e);delete t.click})}break;case"places":this.singleLayers.places=o=new google.maps.places.PlacesService(this.map);if(t.search||t.nearbySearch){var n={bounds:t.bounds||null,keyword:t.keyword||null,location:t.location||null,name:t.name||null,radius:t.radius||null,rankBy:t.rankBy||null,types:t.types||null};if(t.search){o.search(n,t.search)}if(t.nearbySearch){o.nearbySearch(n,t.nearbySearch)}}if(t.textSearch){var a={bounds:t.bounds||null,location:t.location||null,query:t.query||null,radius:t.radius||null};o.textSearch(a,t.textSearch)}break}if(o!==undefined){if(typeof o.setOptions=="function"){o.setOptions(t)}if(typeof o.setMap=="function"){o.setMap(this.map)}return o}};this.removeLayer=function(e){if(typeof e=="string"&&this.singleLayers[e]!==undefined){this.singleLayers[e].setMap(null);delete this.singleLayers[e]}else{for(var t=0;t<this.layers.length;t++){if(this.layers[t]===e){this.layers[t].setMap(null);this.layers.splice(t,1);break}}}};this.toImage=function(e){var e=e||{};var t={};t["size"]=e["size"]||[this.el.clientWidth,this.el.clientHeight];t["lat"]=this.getCenter().lat();t["lng"]=this.getCenter().lng();if(this.markers.length>0){t["markers"]=[];for(var o=0;o<this.markers.length;o++){t["markers"].push({lat:this.markers[o].getPosition().lat(),lng:this.markers[o].getPosition().lng()})}}if(this.polylines.length>0){var a=this.polylines[0];t["polyline"]={};t["polyline"]["path"]=google.maps.geometry.encoding.encodePath(a.getPath());t["polyline"]["strokeColor"]=a.strokeColor;t["polyline"]["strokeOpacity"]=a.strokeOpacity;t["polyline"]["strokeWeight"]=a.strokeWeight}return n.staticMapURL(t)};this.addMapType=function(e,t){if(t.hasOwnProperty("getTileUrl")&&typeof t["getTileUrl"]=="function"){t.tileSize=t.tileSize||new google.maps.Size(256,256);var o=new google.maps.ImageMapType(t);this.map.mapTypes.set(e,o)}else{throw"'getTileUrl' function required."}};this.addOverlayMapType=function(e){if(e.hasOwnProperty("getTile")&&typeof e["getTile"]=="function"){var t=e.index;delete e.index;this.map.overlayMapTypes.insertAt(t,e)}else{throw"'getTile' function required."}};this.removeOverlayMapType=function(e){this.map.overlayMapTypes.removeAt(e)};this.addStyle=function(e){var t=new google.maps.StyledMapType(e.styles,e.styledMapName);this.map.mapTypes.set(e.mapTypeId,t)};this.setStyle=function(e){this.map.setMapTypeId(e)};this.createPanorama=function(e){if(!e.hasOwnProperty("lat")||!e.hasOwnProperty("lng")){e.lat=this.getCenter().lat();e.lng=this.getCenter().lng()}this.panorama=n.createPanorama(e);this.map.setStreetView(this.panorama);return this.panorama};this.on=function(e,t){return n.on(e,this,t)};this.off=function(e){n.off(e,this)}};n.createPanorama=function(e){var t=o(e.el,e.context);e.position=new google.maps.LatLng(e.lat,e.lng);delete e.el;delete e.context;delete e.lat;delete e.lng;var n=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"];var a=extend_object({visible:true},e);for(var i=0;i<n.length;i++){delete a[n[i]]}var r=new google.maps.StreetViewPanorama(t,a);for(var i=0;i<n.length;i++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(){e[o].apply(this)})}})(r,n[i])}return r};n.Route=function(e){this.map=e.map;this.route=e.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight}).getPath();this.back=function(){if(this.step_count>0){this.step_count--;var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.pop()}}}};this.forward=function(){if(this.step_count<this.steps_length){var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.push(e[t])}}this.step_count++}}};n.geolocate=function(e){var t=e.always||e.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(o){e.success(o);if(t){t()}},function(o){e.error(o);if(t){t()}},e.options)}else{e.not_supported();if(t){t()}}};n.geocode=function(e){this.geocoder=new google.maps.Geocoder;var t=e.callback;if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")){e.latLng=new google.maps.LatLng(e.lat,e.lng)}delete e.lat;delete e.lng;delete e.callback;this.geocoder.geocode(e,function(e,o){t(e,o)})};n.staticMapURL=function(e){var t=[];var o;var n="http://maps.googleapis.com/maps/api/staticmap";if(e.url){n=e.url;delete e.url}n+="?";var a=e.markers;delete e.markers;if(!a&&e.marker){a=[e.marker];delete e.marker}var i=e.polyline;delete e.polyline;if(e.center){t.push("center="+e.center);delete e.center}else if(e.address){t.push("center="+e.address);delete e.address}else if(e.lat){t.push(["center=",e.lat,",",e.lng].join(""));delete e.lat;delete e.lng}else if(e.visible){var r=encodeURI(e.visible.join("|"));t.push("visible="+r)}var s=e.size;if(s){if(s.join){s=s.join("x")}delete e.size}else{s="630x300"}t.push("size="+s);if(!e.zoom){e.zoom=15}var l=e.hasOwnProperty("sensor")?!!e.sensor:true;delete e.sensor;t.push("sensor="+l);for(var p in e){if(e.hasOwnProperty(p)){t.push(p+"="+e[p])}}if(a){var g,c;for(var h=0;o=a[h];h++){g=[];if(o.size&&o.size!=="normal"){g.push("size:"+o.size)}else if(o.icon){g.push("icon:"+encodeURI(o.icon))}if(o.color){g.push("color:"+o.color.replace("#","0x"))}if(o.label){g.push("label:"+o.label[0].toUpperCase())}c=o.address?o.address:o.lat+","+o.lng;if(g.length||h===0){g.push(c);g=g.join("|");t.push("markers="+encodeURI(g))}else{g=t.pop()+encodeURI("|"+c);t.push(g)}}}function f(e,t){if(e[0]==="#"){e=e.replace("#","0x");if(t){t=parseFloat(t);t=Math.min(1,Math.max(t,0));if(t===0){return"0x00000000"}t=(t*255).toString(16);if(t.length===1){t+=t}e=e.slice(0,8)+t}}return e}if(i){o=i;i=[];if(o.strokeWeight){i.push("weight:"+parseInt(o.strokeWeight,10))}if(o.strokeColor){var u=f(o.strokeColor,o.strokeOpacity);i.push("color:"+u)}if(o.fillColor){var d=f(o.fillColor,o.fillOpacity);i.push("fillcolor:"+d)}var m=o.path;if(m.join){for(var v=0,y;y=m[v];v++){i.push(y.join(","))}}else{i.push("enc:"+m)}i=i.join("|");t.push("path="+encodeURI(i))}t=t.join("&");return n+t};n.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];n.on=function(e,t,o){if(n.custom_events.indexOf(e)==-1){return google.maps.event.addListener(t,e,o)}else{var a={handler:o,eventName:e};t.registered_events[e]=t.registered_events[e]||[];t.registered_events[e].push(a);return a}};n.off=function(e,t){if(n.custom_events.indexOf(e)==-1){google.maps.event.clearListeners(t,e)}else{t.registered_events[e]=[]}};n.fire=function(e,t,o){if(n.custom_events.indexOf(e)==-1){google.maps.event.trigger(t,e,Array.prototype.slice.apply(arguments).slice(2))}else{if(e in o.registered_events){var a=o.registered_events[e];for(var i=0;i<a.length;i++){(function(e,t,o){e.apply(t,[o])})(a[i]["handler"],o,t)}}}};if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(e){var t=new google.maps.LatLngBounds;var o=this.getPaths();var n;for(var a=0;a<o.getLength();a++){n=o.getAt(a);for(var i=0;i<n.getLength();i++){t.extend(n.getAt(i))}}return t}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(e){var t=this.getBounds();if(t!==null&&!t.contains(e)){return false}var o=false;var n=this.getPaths().getLength();for(var a=0;a<n;a++){var i=this.getPaths().getAt(a);var r=i.getLength();var s=r-1;for(var l=0;l<r;l++){var p=i.getAt(l);var g=i.getAt(s);if(p.lng()<e.lng()&&g.lng()>=e.lng()||g.lng()<e.lng()&&p.lng()>=e.lng()){if(p.lat()+(e.lng()-p.lng())/(g.lng()-p.lng())*(g.lat()-p.lat())<e.lat()){o=!o}}s=l}}return o}}google.maps.LatLngBounds.prototype.containsLatLng=function(e){return this.contains(e)};google.maps.Marker.prototype.setFences=function(e){this.fences=e};google.maps.Marker.prototype.addFence=function(e){this.fences.push(e)};return n}(this);var coordsToLatLngs=function(e,t){var o=e[0];var n=e[1];if(t){o=e[1];n=e[0]}return new google.maps.LatLng(o,n)};var arrayToLatLng=function(e,t){for(var o=0;o<e.length;o++){if(e[o].length>0&&typeof e[o][0]!="number"){e[o]=arrayToLatLng(e[o],t)}else{e[o]=coordsToLatLngs(e[o],t)}}return e};var extend_object=function(e,t){if(e===t)return e;for(var o in t){e[o]=t[o]}return e};var replace_object=function(e,t){if(e===t)return e;for(var o in t){if(e[o]!=undefined)e[o]=t[o]}return e};var array_map=function(e,t){var o=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&e.map===Array.prototype.map){return Array.prototype.map.call(e,function(e){callback_params=o;callback_params.splice(0,0,e);return t.apply(this,callback_params)})}else{var n=[];var a=e.length;for(var i=0;i<a;i++){callback_params=o;callback_params=callback_params.splice(0,0,e[i]);n.push(t.apply(this,callback_params))}return n}};var array_flat=function(e){new_array=[];for(var t=0;t<e.length;t++){new_array=new_array.concat(e[t])}return new_array}}else{throw"Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true."}